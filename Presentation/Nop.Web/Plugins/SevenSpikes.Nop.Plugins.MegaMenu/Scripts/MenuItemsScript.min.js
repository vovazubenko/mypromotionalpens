/*
* Copyright 2016 Seven Spikes Ltd. All rights reserved. (http://www.nop-templates.com)
* http://www.nop-templates.com/t/licensinginfo
*/


var megaMenu;!function(a){var b={menuFocus:"%1$s. Menu item %2$d of %3$d.",moveDown:"Move down one",moveOutFrom:"Move out from under %s",moveToTop:"Move to the top",moveUnder:"Move under %s",moveUp:"Move up one",oneThemeLocationNoMenus:"",outFrom:"Out from under %s",subMenuFocus:"%1$s. Sub item number %2$d under %3$s.",under:"Under %s"},c={Categories:"0",Manufacturers:"20",Vendors:"30",Topics:"50",ProductTags:"85",ColumnsLayout:"150",RowsLayout:"151",Column:"155",Row:"156",Picture:"160",CustomLink:"200"},d={Simple:"0",WithPictures:"5",List:"10"},e=megaMenu={options:{menuItemDepthPerLevel:30,globalMaxDepth:11,sortableItems:"> *",targetTolerance:0},menuList:void 0,targetList:void 0,menusChanged:!1,isRTL:!("undefined"==typeof isRtl||!isRtl),negateIfRTL:"undefined"!=typeof isRtl&&isRtl?-1:1,isLoaded:!1,init:function(){this.isLoaded=!0,e.menuList=a("#menu-to-edit"),e.targetList=e.menuList,this.jQueryExtensions(),this.attachMenuEditListeners(),this.attachUnsavedChangesListener(),e.menuList.length&&this.initSortables(),this.initAccessibility(),this.initPreviewing(),this.refreshColumnLayouts(),this.refreshRowLayouts(),this.denoteColumns(),this.denoteRows(),this.refreshColumns()},jQueryExtensions:function(){a.fn.extend({getAllColumnLayoutsInsideElement:function(){var a=this.has("span.item-title:first > span[data-itemtype="+c.ColumnsLayout+"]");return a},getAllRowLayoutsInsideElement:function(){var a=this.has("span.item-title:first > span[data-itemtype="+c.RowsLayout+"]");return a},getAllColumnsInsideElement:function(){var a=this.has("span.item-title:first > span[data-itemtype="+c.Column+"]");return a},getAllRowsInsideElement:function(){var a=this.has("span.item-title:first > span[data-itemtype="+c.Row+"]");return a},isMenuItemOfType:function(a){var b=this.has("span.item-title:first > span[data-itemtype="+a+"]").length>0;return b},isColumnsLayout:function(){var a=this.isMenuItemOfType(c.ColumnsLayout);return a},isRowsLayout:function(){var a=this.isMenuItemOfType(c.RowsLayout);return a},isColumn:function(){var a=this.isMenuItemOfType(c.Column);return a},isRow:function(){var a=this.isMenuItemOfType(c.Row);return a},isPicture:function(){var a=this.isMenuItemOfType(c.Picture);return a},isCategories:function(){var a=this.isMenuItemOfType(c.Categories);return a},isManufacturers:function(){var a=this.isMenuItemOfType(c.Manufacturers);return a},isVendors:function(){var a=this.isMenuItemOfType(c.Vendors);return a},isTopics:function(){var a=this.isMenuItemOfType(c.Topics);return a},isProductTags:function(){var a=this.isMenuItemOfType(c.ProductTags);return a},menuItemDepth:function(){var a=e.isRTL?this.eq(0).css("margin-right"):this.eq(0).css("margin-left");return e.pxToDepth(a&&-1!=a.indexOf("px")?a.slice(0,-2):0)},updateDepthClass:function(b,c){return this.each(function(){var d=a(this);c=c||d.menuItemDepth(),a(this).removeClass("menu-item-depth-"+c).addClass("menu-item-depth-"+b)})},shiftDepthClass:function(b){return this.each(function(){var c=a(this),d=c.menuItemDepth();a(this).removeClass("menu-item-depth-"+d).addClass("menu-item-depth-"+(d+b))})},childMenuItems:function(){var b=a();return this.each(function(){for(var c=a(this),d=c.menuItemDepth(),e=c.next(".menu-item");e.length&&e.menuItemDepth()>d;)b=b.add(e),e=e.next(".menu-item")}),b},shiftHorizontally:function(b){return this.each(function(){var c=a(this),d=c.menuItemDepth(),e=d+b;c.moveHorizontally(e,d)})},moveHorizontally:function(b,c){return this.each(function(){var d=a(this),e=d.childMenuItems(),f=b-c,g=d.find(".is-submenu");d.updateDepthClass(b,c).updateParentMenuItemDBId(),e&&e.each(function(){var b=a(this),c=b.menuItemDepth(),d=c+f;b.updateDepthClass(d,c).updateParentMenuItemDBId()}),0===b?g.hide():g.show()})},updateParentMenuItemDBId:function(){return this.each(function(){var b=a(this),c=b.find(".menu-item-data-parent-id"),d=parseInt(b.menuItemDepth(),10),e=d-1,f=b.prevAll(".menu-item-depth-"+e).first();0===d?c.val(0):c.val(f.find(".menu-item-data-db-id").val())})},getItemData:function(a,b){a=a||"menu-item";var d,c={},e=["menu-item-db-id","menu-item-object-id","menu-item-object","menu-item-parent-id","menu-item-position","menu-item-type","menu-item-title","menu-item-url","menu-item-description","menu-item-attr-title","menu-item-target","menu-item-classes","menu-item-xfn"];return b||"menu-item"!=a||(b=this.find(".menu-item-data-db-id").val()),b?(this.find("input").each(function(){var f;for(d=e.length;d--;)"menu-item"==a?f=e[d]+"["+b+"]":"add-menu-item"==a&&(f="menu-item["+b+"]["+e[d]+"]"),this.name&&f==this.name&&(c[e[d]]=this.value)}),c):c}})},countMenuItems:function(b){return a(".menu-item-depth-"+b).length},moveMenuItem:function(b,c){var d,f,g,h=a("#menu-to-edit li"),i=h.length,j=b.parents("li.menu-item"),k=j.childMenuItems(),l=j.getItemData(),m=parseInt(j.menuItemDepth(),10),n=parseInt(j.index(),10),o=j.next(),p=o.childMenuItems(),q=parseInt(o.menuItemDepth(),10)+1,r=j.prev(),s=parseInt(r.menuItemDepth(),10),t=r.getItemData()["menu-item-db-id"];switch(c){case"up":if(f=n-1,0===n)break;0===f&&0!==m&&j.moveHorizontally(0,m),0!==s&&j.moveHorizontally(s,m),k?(d=j.add(k),d.detach().insertBefore(h.eq(f)).updateParentMenuItemDBId()):j.detach().insertBefore(h.eq(f)).updateParentMenuItemDBId();break;case"down":if(k){if(d=j.add(k),o=h.eq(d.length+n),p=0!==o.childMenuItems().length,p&&(g=parseInt(o.menuItemDepth(),10)+1,j.moveHorizontally(g,m)),i===n+d.length)break;d.detach().insertAfter(h.eq(n+d.length)).updateParentMenuItemDBId()}else{if(0!==p.length&&j.moveHorizontally(q,m),i===n+1)break;j.detach().insertAfter(h.eq(n+1)).updateParentMenuItemDBId()}break;case"top":if(0===n)break;k?(d=j.add(k),d.detach().insertBefore(h.eq(0)).updateParentMenuItemDBId()):j.detach().insertBefore(h.eq(0)).updateParentMenuItemDBId();break;case"left":if(0===m)break;j.shiftHorizontally(-1);break;case"right":if(0===n)break;if(l["menu-item-parent-id"]===t)break;j.shiftHorizontally(1)}b.focus(),e.registerChange(),e.refreshKeyboardAccessibility(),e.refreshAdvancedAccessibility()},initAccessibility:function(){var b=a("#menu-to-edit");e.refreshKeyboardAccessibility(),e.refreshAdvancedAccessibility(),b.on("mouseenter.refreshAccessibility focus.refreshAccessibility touchstart.refreshAccessibility",".menu-item",function(){e.refreshAdvancedAccessibilityOfItem(a(this).find("a.item-edit"))}),b.on("click","a.item-edit",function(){e.refreshAdvancedAccessibilityOfItem(a(this))}),b.on("click",".menus-move",function(b){var c=a(this),d=c.data("dir");"undefined"!=typeof d&&e.moveMenuItem(a(this).parents("li.menu-item").find("a.item-edit"),d),b.preventDefault()})},refreshAdvancedAccessibilityOfItem:function(c){if(!0===a(c).data("needs_accessibility_refresh")){var d,e,f,g,h,i,j,k,l,m=a(c),n=m.closest("li.menu-item").first(),o=n.menuItemDepth(),p=0===o,q=m.closest(".menu-item-handle").find(".menu-item-title").text(),r=parseInt(n.index(),10),s=p?o:parseInt(o-1,10),t=n.prevAll(".menu-item-depth-"+s).first().find(".menu-item-title").text(),u=n.prevAll(".menu-item-depth-"+o).first().find(".menu-item-title").text(),v=a("#menu-to-edit li").length,w=n.nextAll(".menu-item-depth-"+o).length;n.find(".field-move").toggle(v>1),0!==r&&(d=n.find(".menus-move-up"),d.attr("aria-label",b.moveUp).css("display","inline")),0!==r&&p&&(d=n.find(".menus-move-top"),d.attr("aria-label",b.moveToTop).css("display","inline")),r+1!==v&&0!==r&&(d=n.find(".menus-move-down"),d.attr("aria-label",b.moveDown).css("display","inline")),0===r&&0!==w&&(d=n.find(".menus-move-down"),d.attr("aria-label",b.moveDown).css("display","inline")),p||(d=n.find(".menus-move-left"),e=b.outFrom.replace("%s",t),d.attr("aria-label",b.moveOutFrom.replace("%s",t)).text(e).css("display","inline")),0!==r&&n.find(".menu-item-data-parent-id").val()!==n.prev().find(".menu-item-data-db-id").val()&&(d=n.find(".menus-move-right"),e=b.under.replace("%s",u),d.attr("aria-label",b.moveUnder.replace("%s",u)).text(e).css("display","inline")),p?(f=a(".menu-item-depth-0"),g=f.index(n)+1,v=f.length,h=b.menuFocus.replace("%1$s",q).replace("%2$d",g).replace("%3$d",v)):(i=n.prevAll(".menu-item-depth-"+parseInt(o-1,10)).first(),j=i.find(".menu-item-data-db-id").val(),k=i.find(".menu-item-title").text(),l=a('.menu-item .menu-item-data-parent-id[value="'+j+'"]'),g=a(l.parents(".menu-item").get().reverse()).index(n)+1,h=b.subMenuFocus.replace("%1$s",q).replace("%2$d",g).replace("%3$s",k)),m.attr("aria-label",h).text(h),m.data("needs_accessibility_refresh",!1)}},refreshAdvancedAccessibility:function(){a(".menu-item-settings .field-move a").hide(),a("a.item-edit").data("needs_accessibility_refresh",!0),a(".menu-item-edit-active a.item-edit").each(function(){e.refreshAdvancedAccessibilityOfItem(this)})},refreshKeyboardAccessibility:function(){a("a.item-edit").off("focus").on("focus",function(){a(this).off("keydown").on("keydown",function(b){var c,d=a(this),f=d.parents("li.menu-item"),g=f.getItemData();if((37==b.which||38==b.which||39==b.which||40==b.which)&&(d.off("keydown"),1!==a("#menu-to-edit li").length)){switch(c={38:"up",40:"down",37:"left",39:"right"},a("body").hasClass("rtl")&&(c={38:"up",40:"down",39:"left",37:"right"}),c[b.which]){case"up":e.moveMenuItem(d,"up");break;case"down":e.moveMenuItem(d,"down");break;case"left":e.moveMenuItem(d,"left");break;case"right":e.moveMenuItem(d,"right")}return a("#edit-"+g["menu-item-db-id"]).focus(),!1}})})},initPreviewing:function(){a("#menu-to-edit").on("change input setTitle",".edit-menu-item-title:not(.localized)",function(b){var d,f,g,c=a(b.currentTarget);if(d=c.closest(".menu-item"),g=d.find(".menu-item-title"),f=c.val())g.text(f).removeClass("no-title");else{var h=a("#mega-menu-info").attr("data-noLabel");g.text(h).addClass("no-title")}d.isColumnsLayout()?(e.refreshColumnLayouts(),e.refreshColumns()):d.isRowsLayout()?e.refreshRowLayouts():d.isColumn()&&e.refreshColumns()})},initSortables:function(){function E(a){var b;m=a.placeholder.prev(".menu-item"),n=a.placeholder.next(".menu-item"),m[0]==a.item[0]&&(m=m.prev(".menu-item")),n[0]==a.item[0]&&(n=n.next(".menu-item")),o=m.length?m.offset().top+m.height():0,p=n.length?n.offset().top+n.height()/3:0,k=n.length?n.menuItemDepth():0,l=m.length?(b=m.menuItemDepth()+1)>e.options.globalMaxDepth?e.options.globalMaxDepth:b:0}function F(a,b){a.placeholder.updateDepthClass(b,i),i=b}function G(){if(!t[0].className)return 0;var a=t[0].className.match(/menu-max-depth-(\d+)/);return a&&a[1]?parseInt(a[1],10):0}function H(b){var c,d=v;if(0!==b){if(b>0)c=u+b,c>v&&(d=c);else if(b<0&&u==v)for(;!a(".menu-item-depth-"+d,e.menuList).length&&d>0;)d--;t.removeClass("menu-max-depth-"+v).addClass("menu-max-depth-"+d),v=d}}var b,j,k,l,m,n,o,p,q,r,u,f=!0,g=[d.WithPictures,d.List],h=[c.Categories,c.Manufacturers,c.Vendors],i=0,s=e.menuList.offset().left,t=a("body"),v=G(),w=function(c,d,e){if(c.isCategories()||c.isManufacturers()||c.isVendors()||c.isTopics()||c.isProductTags()){if(d.isColumn())return!1;if(0===e)return!1;var f=c.find(".item-type").attr("data-itemtype"),i=c.find(".edit-menu-item-entityId").val(),j=c.find(".edit-menu-item-template").val(),k="0"===i&&(c.isCategories()||c.isTopics()||c.isProductTags());if(k||h.indexOf(f)!==-1&&g.indexOf(j)!==-1)return b=a("#mega-menu-info").attr("data-invalidNesting-templateBasedMenuItems"),!0}if(d.isCategories()||d.isManufacturers()||d.isVendors()||d.isTopics()||d.isProductTags()){var l=d.find(".item-type").attr("data-itemtype"),m=d.find(".edit-menu-item-entityId").val(),n=d.find(".edit-menu-item-template").val(),o="0"===m&&(d.isCategories()||d.isTopics()||d.isProductTags());if(o||h.indexOf(l)!==-1&&g.indexOf(n)!==-1)return b=a("#mega-menu-info").attr("data-invalidNesting-templateBasedMenuItems"),!0}return!1},x=function(c,d){var e;return c.isPicture()?(e=!d.isColumn(),e&&(b=a("#mega-menu-info").attr("data-invalidNesting-picture-asMovingItem")),e):!!d.isPicture()&&(b=a("#mega-menu-info").attr("data-invalidNesting-picture-asParentItem"),!0)},y=function(c,d,e){var f;return c.isColumn()?(f=!(d.isColumnsLayout()||d.isRow()&&e.isRowsLayout()),f&&(b=a("#mega-menu-info").attr("data-invalidNesting-column-asMovingItem")),f):!!d.isColumn()&&(f=e.isColumnsLayout()&&!c.isRow()||c.isColumnsLayout()||c.isRowsLayout(),f&&(b=a("#mega-menu-info").attr("data-invalidNesting-column-asParentItem")),f)},z=function(c,d,e){var f;return c.isRow()?(f=!(d.isRowsLayout()||d.isColumn()&&e.isColumnsLayout()),f&&(b=a("#mega-menu-info").attr("data-invalidNesting-row-asMovingItem")),f):!!d.isRow()&&(f=e.isRowsLayout()&&!c.isColumn()||c.isColumnsLayout()||c.isRowsLayout(),f&&(b=a("#mega-menu-info").attr("data-invalidNesting-row-asParentItem")),f)},A=function(c,d){var e;return c.isColumnsLayout()?(e=d.length>0,e&&(b=a("#mega-menu-info").attr("data-invalidNesting-columnsLayout-asMovingItem")),e):!!d.isColumnsLayout()&&(e=!c.isColumn(),e&&(b=a("#mega-menu-info").attr("data-invalidNesting-columnsLayout-asParentItem")),e)},B=function(c,d){var e;return c.isRowsLayout()?(e=d.length>0,e&&(b=a("#mega-menu-info").attr("data-invalidNesting-rowsLayout-asMovingItem")),e):!!d.isRowsLayout()&&(e=!c.isRow(),e&&(b=a("#mega-menu-info").attr("data-invalidNesting-rowsLayout-asParentItem")),e)},C=function(a,c){b="";var d=a.item,e=a.placeholder.prevAll(".menu-item-depth-"+(c-1)).first(),f=a.placeholder.prevAll(".menu-item-depth-"+(c-2)).first();return e.is(d)&&(e=d.prevAll(".menu-item-depth-"+(c-1)).first()),(f.is(d)||f.is(e))&&(f=d.prevAll(".menu-item-depth-"+(c-2)).first()),!!x(d,e)||(!!y(d,e,f)||(!!z(d,e,f)||(!!A(d,e)||(!!B(d,e)||!!w(d,e,c)))))},D=function(a,b){C(a,b)?(a.placeholder.css("border-color","#c00"),f=!1):a.placeholder.css("border-color",""),F(a,b)};0!==a("#menu-to-edit li").length&&a(".drag-instructions").show(),s+=e.isRTL?e.menuList.width():0,e.menuList.sortable({handle:".menu-item-handle",placeholder:"sortable-placeholder",items:e.options.sortableItems,start:function(b,c){var d,f,g,h,i;e.isRTL&&(c.item[0].style.right="auto"),r=c.item.children(".menu-item-transport"),j=c.item.menuItemDepth(),F(c,j),g=c.item.next()[0]==c.placeholder[0]?c.item.next():c.item,h=g.childMenuItems(),r.append(h),d=r.outerHeight(),d+=d>0?1*c.placeholder.css("margin-top").slice(0,-2):0,d+=c.helper.outerHeight(),q=d,d-=2,c.placeholder.height(d),u=j,h.each(function(){var b=a(this).menuItemDepth();u=b>u?b:u}),f=c.helper.find(".menu-item-handle").outerWidth(),f+=e.depthToPx(u-j),f-=2,c.placeholder.width(f),i=c.placeholder.next(".menu-item"),i.css("margin-top",q+"px"),c.placeholder.detach(),a(this).sortable("refresh"),c.item.after(c.placeholder),i.css("margin-top",0),E(c)},stop:function(c,d){var g,h,k=i-j;return g=r.children(),g.insertAfter(d.item),f?(h=d.item.find(".item-title .is-submenu"),0<i?h.show():h.hide(),0!==k&&(d.item.updateDepthClass(i),g.shiftDepthClass(k),H(k)),e.registerChange(),d.item.updateParentMenuItemDBId(),d.item[0].style.top=0,e.isRTL&&(d.item[0].style.left="auto",d.item[0].style.right=0),e.refreshKeyboardAccessibility(),e.refreshAdvancedAccessibility(),void(d.item.isColumn()?e.denoteColumns():d.item.isRow()&&e.denoteRows())):(b=b||a("#mega-menu-info").attr("data-invalidNesting-invalidOperation"),a(".invalid-nesting").text(b),a(".invalid-nesting").show(),setTimeout(function(){a(".invalid-nesting").fadeOut()},4e3),a(this).sortable("cancel"),void g.insertAfter(d.item))},change:function(a,b){b.placeholder.parent().hasClass("menu")||(m.length?m.after(b.placeholder):e.menuList.prepend(b.placeholder)),E(b)},sort:function(b,c){var d=c.helper.offset(),g=e.isRTL?d.left+c.helper.width():d.left,h=e.negateIfRTL*e.pxToDepth(g-s);h>l||d.top<o-e.options.targetTolerance?h=l:h<k&&(h=k),c.placeholder.css("border-color",""),f=!0,D(c,h),f&&p&&d.top+q>p&&(n.after(c.placeholder),E(c),a(this).sortable("refreshPositions"))}})},attachMenuEditListeners:function(){var b=this;a("#update-nav-menu").bind("click",function(a){if(a.target&&a.target.className){if(-1!=a.target.className.indexOf("item-edit"))return b.eventOnClickEditLink(a.target);if(-1!=a.target.className.indexOf("item-delete"))return b.eventOnClickMenuItemDelete(a.target)}}),a('#add-custom-links input[type="text"]').keypress(function(b){a("#customlinkdiv").removeClass("form-invalid"),13===b.keyCode&&(b.preventDefault(),a("#submit-customlinkdiv").click())})},addItemToMenu:function(b,c,d,f){d=d||function(){},f=f||function(){};var g=a(".menu-items-administration").attr("data-addMenuItemUrl"),h=c;addAntiForgeryToken(h),a.ajax({type:"POST",url:g,data:h}).done(function(b){var c=a("#menu-instructions");b=a.trim(b),d(b,h),a("li.pending").hide().fadeIn("slow"),a(".drag-instructions").show(),!c.hasClass("menu-instructions-inactive")&&c.siblings().length&&c.addClass("menu-instructions-inactive"),e.registerChange(),f()}).fail(function(a){b.append('<div class="error-message">'+a+"</div>")})},addMenuItemToBottom:function(b){a(b).appendTo(e.targetList),e.refreshKeyboardAccessibility(),e.refreshAdvancedAccessibility();var c=a(b).attr("data-menuItemId"),d=a("#menu-item-"+c);d.isColumnsLayout()?e.refreshColumnLayouts():d.isRowsLayout()&&e.refreshRowLayouts()},addMenuItemToTop:function(b){a(b).prependTo(e.targetList),e.refreshKeyboardAccessibility(),e.refreshAdvancedAccessibility();var c=a(b).attr("data-menuItemId"),d=a("#menu-item-"+c);d.isColumnsLayout()?e.refreshColumnLayouts():d.isRowsLayout()&&e.refreshRowLayouts()},addMenuItemToElement:function(b,c){var d=c.ParentMenuItemId,f=a("#menu-item-"+d);if(f.length>0){var g=f.childMenuItems();g.length>0?a(b).insertAfter(g.last()):a(b).insertAfter(f),e.refreshKeyboardAccessibility(),e.refreshAdvancedAccessibility();var h=a(b).attr("data-menuItemId"),i=a("#menu-item-"+h);i.isColumn()?(e.denoteColumns(),e.refreshColumns()):i.isRow()&&e.denoteRows()}},attachUnsavedChangesListener:function(){a("#menu-to-edit input, #menu-to-edit select").change(function(){e.registerChange()}),0!==a("#menu-to-edit").length?window.onbeforeunload=function(){if(e.menusChanged)return"The changes you made will be lost if you navigate away from this page."}:a("#menu-settings-column").find("input,select").end().find("a").attr("href","#").unbind("click")},registerChange:function(){e.menusChanged=!0},eventOnClickEditLink:function(b){var c,d,e=/#(.*)$/.exec(b.href);if(e&&e[1]&&(c=a("#"+e[1]),d=c.parent(),0!==d.length))return d.hasClass("menu-item-edit-inactive")?(c.data("menu-item-data")||c.data("menu-item-data",c.getItemData()),c.slideDown("fast"),d.removeClass("menu-item-edit-inactive").addClass("menu-item-edit-active")):(c.slideUp("fast"),d.removeClass("menu-item-edit-active").addClass("menu-item-edit-inactive")),!1},eventOnClickMenuItemDelete:function(b){var c=parseInt(b.id.replace("menu-item-delete-",""),10),d=a("#menu-item-"+c),f=d.childMenuItems();if((d.isColumnsLayout()||d.isRowsLayout()||d.isColumn()||d.isRow())&&f.length>0){var g=a("#mega-menu-info").attr("data-confirmationWindow-button-removeAllItems"),h=a("#mega-menu-info").attr("data-confirmationWindow-button-cancel");a("#dialog-confirm").dialog({resizable:!1,draggable:!1,height:"auto",width:400,modal:!0,buttons:[{text:g,icons:{primary:"ui-icon-closethick"},click:function(){e.removeMenuItem(d),f.each(function(){e.removeMenuItem(a(this))}),a(this).dialog("close")}},{text:h,icons:{primary:"ui-icon-cancel"},click:function(){a(this).dialog("close")}}]})}else e.removeMenuItem(d);return!1},removeMenuItem:function(b){var c=b.childMenuItems();b.addClass("deleting").animate({opacity:0,height:0},350,function(){b.remove(),c.shiftDepthClass(-1).updateParentMenuItemDBId(),0===a("#menu-to-edit li").length&&(a(".drag-instructions").hide(),a("#menu-instructions").removeClass("menu-instructions-inactive")),e.refreshAdvancedAccessibility(),b.isColumnsLayout()?(e.refreshColumnLayouts(),e.refreshColumns()):b.isRowsLayout()?e.refreshRowLayouts():b.isColumn()?(e.denoteColumns(),e.refreshColumns()):b.isRow()&&e.denoteRows(),e.registerChange()})},depthToPx:function(a){return a*e.options.menuItemDepthPerLevel},pxToDepth:function(a){return Math.floor(a/e.options.menuItemDepthPerLevel)},refreshColumnLayouts:function(){var a=".has-column-layouts",b=".no-column-layouts",c=e.menuList.find("li").getAllColumnLayoutsInsideElement();e.refreshLayouts(a,b,c)},refreshRowLayouts:function(){var a=".has-row-layouts",b=".no-row-layouts",c=e.menuList.find("li").getAllRowLayoutsInsideElement();e.refreshLayouts(a,b,c)},refreshLayouts:function(b,c,d){d.length>0?(a(b).show(),a(c).hide(),a(b+" select").empty(),d.each(function(){var c=a(this).attr("data-menuitemid")||0,d=a(this).find(".menu-item-title").text()||a("#mega-menu-info").attr("data-noLabel");a(b+" select").append('<option value="'+c+'">'+d+"</option>")})):(a(b).hide(),a(c).show())},refreshColumns:function(){var b=".has-columns",c=".no-columns",d=[],f=e.menuList.find("li").getAllColumnLayoutsInsideElement();if(f.each(function(){var b=a(this),c=b.childMenuItems().getAllColumnsInsideElement();if(c.length>0){var e={title:b.find(".menu-item-title").text(),children:[]};c.each(function(){var b=a(this);e.children.push({id:b.attr("data-menuitemid")||0,title:b.find(".menu-item-title").text()+" "+b.find(".item-type").text()})}),d.push(e)}}),d.length>0){a(b).show(),a(c).hide(),a(b+" select").empty();for(var g=0;g<d.length;g++){var h=d[g],i=h.children,j=a("<optgroup>");j.attr("label",h.title);for(var k=0;k<i.length;k++){var l=i[k],m=a("<option></option>");m.val(l.id),m.text(l.title),j.append(m)}a(b+" select").append(j)}}else a(b).hide(),a(c).show()},denoteColumns:function(){var b=e.menuList.find("li").getAllColumnLayoutsInsideElement();b.each(function(){var b=a(this).childMenuItems().getAllColumnsInsideElement();b.each(function(b){var c=a(this).find(".edit-menu-item-title:not(.localized)"),d=c.val();0===d.length&&c.trigger("setTitle"),a(this).find(".item-type .position").text("["+ ++b+"]")})})},denoteRows:function(){var b=e.menuList.find("li").getAllRowLayoutsInsideElement();b.each(function(){var b=a(this).childMenuItems().getAllRowsInsideElement();b.each(function(b){a(this).find(".edit-menu-item-title:not(.localized)").trigger("setTitle"),a(this).find(".item-type .position").text("["+ ++b+"]")})})}};a(document).ready(function(){var b=a('a[data-toggle="tab"][data-tab-name="tab-menu-items"]');"true"===b.attr("aria-expanded")||b.parent("li").hasClass("active")?megaMenu.init():b.one("shown.bs.tab",function(){megaMenu.init()}),a(".save-settings-button").on("click",function(){e.menusChanged=!1})})}(jQuery);