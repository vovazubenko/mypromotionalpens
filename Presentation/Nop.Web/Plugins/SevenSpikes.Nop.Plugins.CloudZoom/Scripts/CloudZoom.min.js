(function(n){n(document).ready(function(){function p(t){t&&t.options.autoInside>0&&(n(window).width()<t.options.autoInside&&(t.options.captionPosition="bottom"),n(window).resize(function(){t.options.captionPosition=n(window).width()<=t.options.autoInside?"bottom":"top"}))}var h,t,s,e,i,f;if(CloudZoom.quickStart(),h=n(".cloudZoomAdjustPictureOnProductAttributeValueChange"),t=n(".cloudZoomPictureThumbnailsInCarouselData"),h.attr("data-isIntegratedByWidget")==="true"){var c="#sevenspikes-cloud-zoom",y=function(t){var r=t.attr("data-selectorOfTheParentElementOfTheCloudZoomWindow"),u,i,f;if(r!=undefined&&r!==""&&(u=n(r),u!=undefined)){if(i=t.attr("data-zoomWindowElementId"),i==undefined||i==="")return;f="<div id="+i+' style="position: absolute;"><\/div>';n(u).prepend(f)}},r=n(c),o=r.attr("data-defaultImageContainerSelector");if(o==undefined||o==="")return;n(o).each(function(){n(this).find(c).length<=0?s=n(this):e=n(this)});s!=null&&e!=null&&(s.replaceWith(e),e.show());y(r);n.event.trigger({type:"nopCloudZoomLoadCompletedEvent"});i=r.attr("data-zoomWindowElementId");n("#cloudZoomImage").bind("cloudzoom_start_zoom",function(){if(i){var t=r.attr("data-zoom-window-width"),u=r.attr("data-zoom-window-height");n("#"+i).width(t);n("#"+i).height(u)}n(".gallery .ribbon-wrapper .ribbon-position").hide()});n("#cloudZoomImage").bind("cloudzoom_end_zoom",function(){i&&(n("#"+i).css("width",""),n("#"+i).css("height",""));n(".gallery .ribbon-wrapper .ribbon-position").show()})}if(n("#cloudZoomImage").bind("cloudzoom_ready",function(){var t=n("#cloudZoomImage").data("CloudZoom");p(t)}),t.length>0){var l=parseInt(t.attr("data-numVisible"))||5,a=t.attr("data-vertical")==="true",v=t.attr("data-rtl")==="true",w=t.attr("data-responsive-breakpoints-for-thumbnails"),u={},b=a?!1:v;try{for(u=JSON.parse(w),f=0;f<u.length;f++)u[f].settings.vertical||(u[f].settings.rtl=v)}catch(k){console.log("Invalid carousel breakpoints setting value!")}n("#picture-thumbs-carousel").slick({rtl:b,infinite:!0,vertical:a,slidesToShow:l,slidesToScroll:l,easing:"swing",draggable:!1,responsive:u})}n(".cloudZoomEnableClickToZoom").length>0&&n("#cloudZoomImage").bind("click",function(){var s=n(this).data("CloudZoom"),i,u,f,r,e,o;for(s.closeZoom(),i=[],u=function(n,t){this.src=n;this.title=t},n(".picture-thumbs a.cloudzoom-gallery").length<1&&i.push(new u(n(".picture a.picture-link").attr("data-full-image-url"),n(".picture a.picture-link img").attr("title"))),n(".picture-thumbs a.cloudzoom-gallery").each(function(){n(this).parent().hasClass("slick-cloned")||i.push(new u(n(this).attr("data-full-image-url"),n(this).attr("title")))}),f=0,r=0;r<i.length;r++)if(e=i[r].src.slice(0,-5),o=n(".picture a.picture-link img").attr("src"),o.indexOf(e)!==-1){f=r;break}return n.magnificPopup.open({items:i,type:"image",removalDelay:300,gallery:{enabled:!0,tPrev:t.attr("data-magnificpopup-prev"),tNext:t.attr("data-magnificpopup-next"),tCounter:t.attr("data-magnificpopup-counter")},tClose:t.attr("data-magnificpopup-close"),tLoading:t.attr("data-magnificpopup-loading")},f),!1});n(document).on("product_attributes_changed",function(t){if(t.changedData&&t.changedData.pictureFullSizeUrl){var i=t.changedData.pictureFullSizeUrl;n('.cloudzoom-gallery[data-full-image-url="'+i+'"]').click();n.event.trigger({type:"nopMainProductImageChanged",pictureDefaultSizeUrl:i,pictureFullSizeUrl:i})}})})})(jQuery,sevenSpikes);