FiltersManager = function () { this.isOnSearchPage = $(".nopAjaxFilters7Spikes").attr("data-isonsearchpage"), this.keyword = $(".nopAjaxFilters7Spikes").attr("data-searchkeyword"), this.searchCategoryId = $(".nopAjaxFilters7Spikes").attr("data-searchcategoryid"), this.searchManufacturerId = $(".nopAjaxFilters7Spikes").attr("data-searchmanufacturerid"), this.searchVendorId = $(".nopAjaxFilters7Spikes").attr("data-searchvendorid"), this.priceFrom = $(".nopAjaxFilters7Spikes").attr("data-searchpricefrom"), this.priceTo = $(".nopAjaxFilters7Spikes").attr("data-searchpriceto"), this.includeSubcategories = $(".nopAjaxFilters7Spikes").attr("data-searchincludesubcategories"), this.searchInProductDescriptions = $(".nopAjaxFilters7Spikes").attr("data-searchinproductdescriptions"), this.advancedSearch = $(".nopAjaxFilters7Spikes").attr("data-searchadvancedsearch"), this.categoryId = $(".nopAjaxFilters7Spikes").attr("data-categoryId"), this.manufacturerId = $(".nopAjaxFilters7Spikes").attr("data-manufacturerId"), this.vendorId = $(".nopAjaxFilters7Spikes").attr("data-vendorId"), this.getFilteredProductsUrl = $(".nopAjaxFilters7Spikes").attr("data-getFilteredProductsUrl"), this.filtersUIMode = $(".nopAjaxFilters7Spikes").attr("data-filtersUIMode"), this.filtersUIModeEnum = { userCheckboxes: "usecheckboxes", useDropDowns: "usedropdowns" }, this.selectedFilterGroupElement = void 0, this.selectedFilterOptionElement = void 0, this.isProductRefreshTriggeredByScroll = !1 }, function (e, t, r) { function i() { return "true" === e(".nopAjaxFilters7Spikes").attr("data-enableinfinitescroll").toLowerCase() } function a(t, r) { e(t).each(function () { var t = e(this); t.is("select") && t.val() !== r && (t.val(r).attr("valueChangedByScript", "true"), t.change()) }) } function o(t) { if (e(t).length > 0) return t; var r = t.slice(1); return t.startsWith("#") ? "." + r : t.startsWith(".") ? "#" + r : t } function s() { return o(e(".nopAjaxFilters7Spikes").attr("data-viewOptionsDropDownSelector") || ".products-viewmode, .viewmode-icon") } function l(t) { !0 === t.hasClass("closed") ? t.removeClass("closed") : t.addClass("closed"), t.parent().siblings(".filtersGroupPanel").slideToggle("slow", function () { e(this).css("overflow", "") }) } function n() { var t = e(".nopAjaxFilters7Spikes").first(), r = e(".block.filter-block.selected-options").first(), i = t.attr("data-selectedOptionsTargetSelector") || ".nopAjaxFilters7Spikes .filtersPanel:first", a = "usedropdowns" === t.attr("data-filtersuimode"); switch (t.attr("data-selectedOptionsTargetAction")) { case "insertBefore": r.insertBefore(i); break; case "insertAfter": r.insertAfter(i); break; case "appendTo": r.appendTo(i); break; default: r.prependTo(i) }var o = r.find(".selected-options-list"); o.empty(), r.find("a.toggleControl").off("click").on("click", function () { l(e(this)) }); var s = t.find(".priceRangeFilterPanel7Spikes"); if (s.length > 0) { var n = s.find("#slider"), d = n.attr("data-sliderminvalue"), c = n.attr("data-slidermaxvalue"), p = e(".priceRangeCurrentPricesPanel .currentMinPrice").text(), u = e(".priceRangeCurrentPricesPanel .currentMaxPrice").text(); if (n.length > 0 && (d !== p || c !== u)) { var f = e('<span class="option">' + p + " - " + u + "</span>"); f.anchorCustomClick(s.find(".clearPriceRangeFilter")); var h = s.find(".toggleControl").text(), g = e('<li class="price-range-selected-ranges"><label>' + h + ":</label></li>"); g.append(f), o.append(g) } } t.find(".filter-block").each(function () { var t = !1, r = e(this), i = e("<li><label>" + r.children(".title").children("a.toggleControl").first().text() + ":</label></li>"); r.find("[data-option-ids][selected], [data-option-ids][checked]").each(function () { var r = e(this), o = r.text() || r.next("label").text(), s = e('<span class="option">' + o + "</span>"); t = !0, a ? s.anchorCustomClick(r.closest(".filtersGroupPanel").siblings(".title").children(".clearFilterOptions")) : s.anchorCustomClick(r), i.append(s) }), t && o.append(i) }), o.children().length > 0 ? r.show() : (r.hide(), t.prepend(r)) } function d() { var t = s(), r = e(t).filter(".selected"); return r.length > 0 ? r.attr("data-dropdownoptionvalue") : e(".viewOptionsDropDown").attr("data-DropDownOptionsSelectedValue") || e(".viewOptionsDropDown").val() || null } function c(t) { var r = e(t.currentTarget).attr("data-pageNumber"); null != t.data && null != t.data.filtersManager && t.data.filtersManager.requestProductsForSelectedFilters(void 0, void 0, r, void 0, void 0, !0) } function p() { var t = e(".nopAjaxFilters7Spikes").attr("data-productsGridPanelSelector") + "," + e(".nopAjaxFilters7Spikes").attr("data-ProductsListPanelSelector"); return e(".master-wrapper-page " + t).not(".featured-product-grid, .nop-jcarousel").last() } function u() { var t = e(".pager .next-page > a").first(); if (0 !== t.length) { var i = p(); if (0 !== i.length) if (e(window).outerHeight() + e(window).scrollTop() > i.innerHeight() + i.offset().top) { e(".infinite-scroll-loader").show(); var a = new r, o = parseInt(t.attr("data-pageNumber")); a.requestProductsForSelectedFilters(void 0, void 0, o, void 0, void 0, !0, !0) } } else e(window).off("scroll.filtersinfinitescroll resize.filtersinfinitescroll orientationchange.filtersinfinitescroll") } function f() { if (0 === e(".infinite-scroll-loader").length) { var t = e(".ajaxBusyPanelParent"); 0 === t.length && (t = p()), t.append('<div class="infinite-scroll-loader">' + e(".nopAjaxFilters7Spikes").attr("data-infinitescrollloadertext") + "</div>") } } function h(t, o) { a(".sortOptionsDropDown", t), o && (i() && e.address.history(!0), (new r).requestProductsForSelectedFilters()) } function g(e, t) { a(".viewOptionsDropDown", e), t && (new r).requestProductsForSelectedFilters(void 0, void 0, void 0, void 0, void 0, !0) } function v(e, t) { a(".productsPageSizeDropDown", e), t && (new r).requestProductsForSelectedFilters() } function F(t, r) { t.each(function () { var t = "", i = e(r).val(), a = e.parseJSON(i); if (!e(this).is("select")) { var o = "."; return null != a[0] && a[0].Selected ? o += a[0].Value.toLowerCase() : null != a[1] && a[1].Selected && (o += a[1].Value.toLowerCase()), void e(s()).removeClass("selected").filter(o).addClass("selected") } for (var l = 0; l < a.length; l++) { var n = a[l], d = "<option "; n.Disabled && (d += 'disabled="disabled" '), n.Selected && (d += 'selected="selected" '), d += 'value="' + n.Value + '">', t += d += n.Text + "</option>" } e(this).html(t) }) } function S() { var t = e(o(e(".nopAjaxFilters7Spikes").attr("data-sortOptionsDropDownSelector") || ".products-orderby")); 0 !== t.length && (t.addClass("sortOptionsDropDown").removeAttr("onchange").off("change").on("change", function (t) { t.preventDefault(); var r = e(this), i = null == r.attr("valueChangedByScript"); r.removeAttr("valueChangedByScript"), h(r.val(), i) }), F(t, "#availableSortOptionsJson")) } function P() { var t = e(o(e(".nopAjaxFilters7Spikes").attr("data-productsPageSizeDropDownSelector") || ".products-pagesize")); 0 !== t.length && (t.addClass("productsPageSizeDropDown").removeAttr("onchange").off("change").on("change", function (t) { t.preventDefault(); var r = e(this), i = null == r.attr("valueChangedByScript"); r.removeAttr("valueChangedByScript"), v(r.val(), i) }), F(t, "#availablePageSizesJson")) } function x() { var t; S(), 0 !== (t = e(s())).length && (t.is("select") ? t.addClass("viewOptionsDropDown").removeAttr("onchange").off("change").on("change", function (t) { t.preventDefault(); var r = e(this), i = null == r.attr("valueChangedByScript"); r.removeAttr("valueChangedByScript"), g(r.val(), i) }) : (t.filter(".grid").attr("data-dropdownoptionvalue", "grid"), t.filter(".list").attr("data-dropdownoptionvalue", "list"), t.on("click", function (r) { r.preventDefault(), e(this).hasClass("selected") || (t.removeClass("selected"), e(this).addClass("selected"), g(e(this).attr("data-dropdownoptionvalue"), !0)) })), F(t, "#availableViewModesJson")), P(), e(document).trigger({ type: "ajaxFiltersReplacedDropDownsEvent" }) } var m = 0, y = 1, k = 2, w = 3, A = "nop7SpikesAjaxFiltersGrid"; e.fn.extend({ anchorCustomClick: function (t) { return e(this).first().on("click", function (r) { r.preventDefault(), e(t).trigger("click") }) } }), r.prototype.requestProductsForSelectedFilters = function (a, o, s, l, c, p, u) { if (!r.waitForAjaxRequest && "#/noFilterApplied" !== l) { a && o && i() && e.address.history(!0), this.isProductRefreshTriggeredByScroll = u || !1, null == l ? l = "" : p = !0, this.setSpecificationFilterSelection(a, o); var f = this.getSpecificationFiltersModel(), h = this.getAttributeFiltersModel(), g = this.getManufacturerFiltersModel(), v = this.getVendorFiltersModel(), F = this.getOnSaleFiltersModel(), S = this.getPriceRangeFilterModel(); null == s && (s = null); var P = e(".sortOptionsDropDown").val() || 0, x = d(), m = e(".productsPageSizeDropDown").val() || 0, y = t.getUrlVar("pageNumber"); null == y || null != s || null != c && !1 !== c || (s = y), null == p && (p = !1); var k = { categoryId: this.categoryId, manufacturerId: this.manufacturerId, vendorId: this.vendorId, priceRangeFilterModel7Spikes: S, specificationFiltersModel7Spikes: f, attributeFiltersModel7Spikes: h, manufacturerFiltersModel7Spikes: g, vendorFiltersModel7Spikes: v, pageNumber: s, orderby: P, viewmode: x, pagesize: m, queryString: l, shouldNotStartFromFirstPage: p, onSaleFilterModel: F, keyword: this.keyword, searchCategoryId: this.searchCategoryId, searchManufacturerId: this.searchManufacturerId, searchVendorId: this.searchVendorId, priceFrom: this.priceFrom, priceTo: this.priceTo, includeSubcategories: this.includeSubcategories, searchInProductDescriptions: this.searchInProductDescriptions, advancedSearch: this.advancedSearch, isOnSearchPage: this.isOnSearchPage }; this.isProductRefreshTriggeredByScroll || this.showProductPanelAjaxBusy(); var w = this, A = this.getFilteredProductsUrl; r.waitForAjaxRequest = !0, e.ajax({ cache: !1, type: "POST", data: e.toJSON(k), contentType: "application/json; charset=utf-8", url: A }).done(function (t) { if ("" !== l && (w.changeViewModeOrderByAndPageSize(t), w.setPriceRangeValues(t)), w.refreshProducts(t, w.isProductRefreshTriggeredByScroll)) { if (w.refreshFilters(t), w.refreshProductsPager(t), w.refreshClearButtons(), "NO HASH QUERY" !== l) { w.expandFilterPanelsWithSelectedOptions(); var i = e(t).filter("#urlHashQuery").val().toString(); "" !== i ? (w.isProductRefreshTriggeredByScroll && (i = i.slice(0, i.indexOf("&pageNumber"))), e.address.value(i)) : e.address.value("noFilterApplied") } w.hideProductPanelAjaxBusy(), r.waitForAjaxRequest = !1; var a = e(".nopAjaxFilters7Spikes").attr("data-scrollToElement"); if (!w.isProductRefreshTriggeredByScroll && null != a && "true" === a.toLowerCase()) { var o = e(".nopAjaxFilters7Spikes").attr("data-scrollToElementSelector").split(","), s = ".product-selectors"; if (null != o && o.length > 0) { for (var d = 0; d < o.length; d++)if (e(o[d].trim()).length > 0) { s = o[d].trim(); break } e(s).length > 0 && e("html, body").animate({ scrollTop: e(s).offset().top }, "slow") } } e(".productPanelAjaxBusy").length < 1 && w.addProductPanelAjaxBusyToPage(); var c = e(t).filter("#totalCount").val().toString(); if (e.event.trigger({ type: "nopAjaxFiltersFiltrationCompleteEvent", totalCount: c }), "true" === e(".nopAjaxFilters7Spikes").attr("data-showSelectedFiltersPanel").toLowerCase() && n(), "true" !== e(".nopAjaxFilters7Spikes").attr("data-enableinfinitescroll").toLowerCase() && "false" !== e(".nopAjaxFilters7Spikes").attr("data-numberofreturnedproductsselector").toLowerCase()) { var p = m; e(".page-body .product-grid:not(.featured-product-grid, .nop-jcarousel)").length > 0 ? p = e(".page-body .product-grid:not(.featured-product-grid, .nop-jcarousel) .item-box").length : e(".page-body .product-list").length > 0 && (p = e(".page-body .product-list .item-box").length), function (t, r) { if (null != t || (t = parseInt(e(".productsPageSizeDropDown .toplevel p").text()), !isNaN(t))) { t > (r = parseInt(r)) && (t = r); var i = e(".nopAjaxFilters7Spikes").attr("data-numberofreturnedproductsselector") || ".product-viewmode", a = e(i); e(".returned-products-filters-panel").children(".allProductsReturned").text(r); var o = e(".number-of-returned-products.sample-element").first(); e(".number-of-returned-products").not(o).remove(); var s = o.clone(); s.removeClass("sample-element"), s.children(".productsPerPage").text(t), s.children(".allProductsReturned").text(r), 0 === a.length ? e(".product-selectors").append(s) : a.after(s), s.css("display", "").addClass("active") } }(p, c) } $("html,body").animate({ scrollTop: 0 }, 10) } else r.waitForAjaxRequest = !1 }).fail(function () { w.hideProductPanelAjaxBusy(), alert("Loading the page failed."), r.waitForAjaxRequest = !1 }).always(function () { w.isProductRefreshTriggeredByScroll = !1, i() && e.address.history(!1) }) } }, r.prototype.getSpecificationFiltersModel = function () { return this.buildSpecificationFiltersModel(this.categoryId, this.manufacturerId, this.vendorId, this.selectedFilterGroupElement) }, r.prototype.getAttributeFiltersModel = function () { return this.buildAttributeFiltersModel(this.categoryId, this.manufacturerId, this.vendorId, this.selectedFilterGroupElement) }, r.prototype.getManufacturerFiltersModel = function () { return this.buildManufacturerFiltersModel(this.categoryId, this.selectedFilterGroupElement) }, r.prototype.getVendorFiltersModel = function () { return this.buildVendorFiltersModel(this.categoryId, this.selectedFilterGroupElement) }, r.prototype.getOnSaleFiltersModel = function () { return this.buildOnSaleFiltersModel(this.categoryId, this.manufacturerId, this.vendorId, this.selectedFilterGroupElement) }, r.prototype.getPriceRangeFilterModel = function () { var e = null; return null != this.buildPriceRangeFilterModel && (e = this.buildPriceRangeFilterModel(this.categoryId, this.manufacturerId, this.vendorId, this.selectedFilterGroupElement)), e }, r.prototype.refreshProducts = function (t, r) { var i, a = d() || e(".nopAjaxFilters7Spikes").attr("data-defaultViewMode"), o = this.getProductsPanelSelector(a), s = e("." + A); if (null != e(t).filter(o).html()) { if (s.length > 1 && (s = s.last()), r) { var l = e(t).filter(o), n = l.find(".item-box"); l.hasClass("product-grid") ? s.hasClass("product-list") && s.removeClass("product-list").addClass("product-grid") : s.hasClass("product-grid") && s.removeClass("product-grid").addClass("product-list"), e(".infinite-scroll-loader").hide(), s.find(".item-box").last().after(n) } else 0 == s.length && (s = $(".product-grid")), s.replaceWith(e(t).filter(o)); i = !0 } else this.hideProductPanelAjaxBusy(), e("#nopAjaxFiltersNoProductsDialog").length > 0 ? this.showNoProductsModalDialog() : (s.prepend(e(t).filter("#nopAjaxFiltersNoProductsDialog")), this.showNoProductsModalDialog()), i = !1; return i }, r.prototype.refreshProductsPager = function (t) { var r = this.getPagerPanelSelector(), i = e(r); if (void 0 !== t) { var a = e(t).filter(r); if (0 === i.length && a.length > 0) { var o = e(".nopAjaxFilters7Spikes").attr("data-pagerpanelintegrationselector") || ".product-grid, .product-list", s = e(o); s.length > 0 && (s.hasClass("product-grid") || s.hasClass("product-list")) && (s = s.not(".featured-product-grid, .nop-jcarousel").last()), 0 === s.length && (s = p()), s.after('<div class="pager"></div>'), i = e(r) } "true" === e(".nopAjaxFilters7Spikes").attr("data-enableinfinitescroll").toLowerCase() && i.hide(), i.html(a.html()), i.length > 0 && 0 === a.length && i.remove() } this.setPagerLinks(i) }, r.prototype.setPagerLinks = function (t) { var r = this; t.find("a").each(function () { var t = e(this).attr("href"), i = ""; if (null != t) { t = t.toLowerCase(); var a = /pagenumber=(\d+)/.exec(t); null != a && a.length > 1 && (i = a[1]) } e(this).removeAttr("href"), e(this).attr("data-pageNumber", i), e(this).click({ filtersManager: r }, c) }) }, r.prototype.getProductsPanelSelector = function (t) { return "list" === t ? e(".nopAjaxFilters7Spikes").attr("data-ProductsListPanelSelector") || ".product-list" : e(".nopAjaxFilters7Spikes").attr("data-productsGridPanelSelector") || ".product-grid" }, r.prototype.getPagerPanelSelector = function () { return e(".nopAjaxFilters7Spikes").attr("data-pagerPanelSelector") || ".pager" }, r.prototype.clearFilterOptions = function (t) { var r = e(t.currentTarget).parent().siblings(".filtersGroupPanel"); t.data.filtersManager.clearFilterOptionsForFiltersGroupElement(r) }, r.prototype.clearFilterOptionsForFiltersGroupElement = function (e) { e.find("[data-option-ids]").removeAttr("checked selected"); var t = e.find(".select-wrap"); t.length > 0 && t.find(".select-inner").text(t.find("select option:selected").text()), this.requestProductsForSelectedFilters(e, void 0) }, r.prototype.selectAllFilterDropDownOption = function (t) { var r = e(t.currentTarget).closest(".filtersGroupPanel"); this.clearFilterOptionsForFiltersGroupElement(r) }, r.prototype.clearAllFilterOptions = function (t) { e(".nopAjaxFilters7Spikes .filtersGroupPanel").find("[data-option-ids]").removeAttr("checked selected"), e(".nopAjaxFilters7Spikes .select-wrap").each(function () { var t = e(this); t.find(".select-inner").text(t.find("select option:selected").text()) }); var r = t.data.filtersManager; r.clearPriceRangeFilterControl(), r.requestProductsForSelectedFilters() }, r.prototype.refreshClearButtons = function () { var t = !1; e(".nopAjaxFilters7Spikes .filtersGroupPanel").each(function () { var r = e(this), i = !1; r.find("[data-option-ids]").each(function () { var t = e(this); if (null != (t.attr("selected") || t.attr("checked"))) return i = !0, !1 }); var a = r.parent().find("a.clearFilterOptions"); i ? (a.show(), t = !0) : a.hide() }); var r = e(".nopAjaxFilters7Spikes .filtersTitlePanel a.clearFilterOptionsAll"); if (t) r.show(); else { var i = !1; null != this.determineIfPriceRangeHasBeenSelected && (i = this.determineIfPriceRangeHasBeenSelected()), i ? r.show() : r.hide() } }, r.prototype.expandFilterPanelsWithSelectedOptions = function () { e(".clearPriceRangeFilter, .clearFilterOptions").filter(":visible").siblings("a.toggleControl.closed").click() }, r.prototype.changeViewModeOrderByAndPageSize = function (t) { var r = e(t).filter("#currentPageSizeJson").val(), i = e.parseJSON(r), o = e(t).filter("#currentOrderByJson").val(), l = e.parseJSON(o), n = e(t).filter("#currentViewModeJson").val(), d = e.parseJSON(n); a(".sortOptionsDropDown", l), a(".viewOptionsDropDown", d), a(".productsPageSizeDropDown", i), e(s()).removeClass("selected").filter("." + d).addClass("selected") }, r.prototype.setPriceRangeValues = function (t) { var r = e(t).filter("#priceRangeFromJson").val().toString(), i = e.parseJSON(r), a = e(t).filter("#priceRangeToJson").val().toString(), o = e.parseJSON(a); null != this.SetSliderValues && this.SetSliderValues(i, o) }, r.prototype.refreshFilters = function (t) { var r = this, i = e(t).filter("#specificationFilterModel7SpikesJson").val().toString(), a = e.parseJSON(i); r.refreshSpecificationFilters(a, r.filtersUIMode); var o = e(t).filter("#attributeFilterModel7SpikesJson").val().toString(), s = e.parseJSON(o); r.refreshAttributeFilters(s, r.filtersUIMode); var l = e(t).filter("#manufacturerFilterModel7SpikesJson").val().toString(), n = e.parseJSON(l); r.refreshManufacturerFilters(n, r.filtersUIMode); var d = e(t).filter("#vendorFilterModel7SpikesJson").val().toString(), c = e.parseJSON(d); r.refreshVendorFilters(c, r.filtersUIMode); var p = e(t).filter("#onSaleFilterModel7SpikesJson").val().toString(), u = e.parseJSON(p); r.refreshOnSaleFilters(u, r.filtersUIMode), e(".nopAjaxFilters7Spikes .filtersGroupPanel").each(function () { var t = e(this), r = !0; t.find("[data-option-ids]").each(function () { if (!e(this).is(":disabled")) return r = !1, !1 }), r ? t.find("select").attr("disabled", "disabled") : t.find("select").removeAttr("disabled"), t.toggleClass("disabled", r) }) }, r.prototype.clearPriceRangeFilterControl = function () { }, r.prototype.refreshManufacturerFilters = function () { }, r.prototype.refreshVendorFilters = function () { }, r.prototype.refreshSpecificationFilters = function () { }, r.prototype.refreshAttributeFilters = function () { }, r.prototype.refreshOnSaleFilters = function () { }, r.prototype.buildManufacturerFiltersModel = function () { }, r.prototype.buildVendorFiltersModel = function () { }, r.prototype.buildSpecificationFiltersModel = function () { }, r.prototype.buildAttributeFiltersModel = function () { }, r.prototype.buildOnSaleFiltersModel = function () { }, r.prototype.addProductPanelAjaxBusyToPage = function () { var t = p(); t.addClass("ajaxBusyPanelParent " + A), t.css("position", "relative"), t.append(e('<div class="productPanelAjaxBusy"></div><div class="clear"></div>')), e(".productPanelAjaxBusy").hide(), f() }, r.prototype.setSpecificationFilterSelection = function (e, t) { this.selectedFilterGroupElement = e, this.selectedFilterOptionElement = t }, r.prototype.showNoProductsModalDialog = function () { var t = e("#nopAjaxFiltersNoProductsDialog").data("kendoWindow"), r = e("#nopAjaxFiltersNoProductsDialog").attr("title"); r || (r = "NO RESULTS FOUND"), t || (t = e("#nopAjaxFiltersNoProductsDialog").kendoWindow({ draggable: !1, resizable: !1, width: "300px", height: "100px", title: r, modal: !0, actions: ["Close"], animation: !1, visible: !1 }).data("kendoWindow")).wrapper.addClass("ajaxFilters"), t.center(), t.open(), e(document).on("click", ".k-overlay", function () { t.close() }) }, r.prototype.showProductPanelAjaxBusy = function () { e(".productPanelAjaxBusy").show() }, r.prototype.hideProductPanelAjaxBusy = function () { e(".productPanelAjaxBusy").hide() }, r.getFilterItemStateBasedOnAttributes = function (e) { var t = null != (e.attr("selected") || e.attr("checked")), r = null != e.attr("disabled"); return t && r ? "CheckedDisabled" : t && !r ? "Checked" : !t && r ? "Disabled" : "Unchecked" }, r.waitForAjaxRequest = !1, r.addStateClassToCheckBoxParent = function (e, t) { var r = e.parent("li"); 0 !== r.length && (t !== y && t !== k || (r.addClass("checked"), t === y && r.removeClass("disabled")), t !== k && t !== w || r.addClass("disabled"), t === m && r.removeClass("checked disabled")) }, r.addStateAttributesToOption = function (e, t, r) { t !== y && t !== k || (r ? e.attr("selected", "selected").trigger("change") : e.attr("checked", "checked"), t === y && e.removeAttr("disabled")), t !== k && t !== w || e.attr("disabled", "disabled"), t === m && e.removeAttr("checked selected disabled") }, r.addStateClassAndAttributesToOption = function (e, t, i) { var a = !1; return t === y && (a = !0), i || r.addStateClassToCheckBoxParent(e, t), r.addStateAttributesToOption(e, t, i), a }, e(document).ready(function () { var t = new r; t.addProductPanelAjaxBusyToPage(), e(".nopAjaxFilters7Spikes .block .title a.toggleControl").off("click").on("click", function () { l(e(this)) }), e(".nopAjaxFilters7Spikes .block .title a.clearFilterOptions").each(function () { e(this).click({ filtersManager: t }, t.clearFilterOptions), e(this).hide() }), e(".nopAjaxFilters7Spikes .filtersDropDown a.allFilterDropDownOptions").each(function () { e(this).click({ filtersManager: t }, t.selectAllFilterDropDownOption) }); var i = e(".nopAjaxFilters7Spikes .filtersTitlePanel a.clearFilterOptionsAll"); if (i.click({ filtersManager: t }, t.clearAllFilterOptions), i.hide(), t.refreshProductsPager(), t.filtersUIMode === t.filtersUIModeEnum.useDropDowns) { var a = e(".filtersDropDownPanel.filtersGroupPanel"), o = a.length + 100; a.each(function () { e(this).css("z-index", o--) }) } "true" === e(".nopAjaxFilters7Spikes").attr("data-enableinfinitescroll").toLowerCase() && function () { f(), e(".product-page-size, " + e(".nopAjaxFilters7Spikes").attr("data-pagerpanelselector")).hide(), e(".product-selectors").addClass("infinite-scroll-enabled"); var t = function () { e(window).off("scroll.filtersinfinitescroll resize.filtersinfinitescroll orientationchange.filtersinfinitescroll").on("scroll.filtersinfinitescroll resize.filtersinfinitescroll orientationchange.filtersinfinitescroll", function () { u() }), u() }; e(document).on("nopAjaxFiltersFiltrationCompleteEvent", t), window.location.hash && "#/noFilterApplied" !== window.location.hash || t() }(), e(".filtersGroupSearchInput").on("keyup", function () { var t = e(this).val().toLowerCase(), r = e(this).parent().next(".checkbox-list").children(); "" === t ? r.each(function () { var t = e(this), r = t.find("label"), i = r.data("originaltext"); r.html(i), t.show() }) : r.each(function () { var r = e(this), i = r.find("label"), a = i.data("originaltext"), o = a.toLowerCase().indexOf(t); if (-1 !== o) { var s = a.substring(o, o + t.length); if (0 === o) { var l = a.substring(s.length); i.html("<strong>" + s + "</strong>" + l) } else if (o > 0) { var n = a.slice(0, o), d = a.slice(o + t.length); i.html(n + "<strong>" + s + "</strong>" + d) } r.show() } else r.hide() }) }), null == e("body").attr("nosimpleselect") && e(".filtersPanel select").simpleSelect() }), e(window).unload(function () { i() && e.address.history(!0) }), e(document).ready(function () { x(), i() && e.address.history(!1) }) }(jQuery, sevenSpikes, FiltersManager); FiltersManager = function () { this.isOnSearchPage = $(".nopAjaxFilters7Spikes").attr("data-isonsearchpage"), this.keyword = $(".nopAjaxFilters7Spikes").attr("data-searchkeyword"), this.searchCategoryId = $(".nopAjaxFilters7Spikes").attr("data-searchcategoryid"), this.searchManufacturerId = $(".nopAjaxFilters7Spikes").attr("data-searchmanufacturerid"), this.searchVendorId = $(".nopAjaxFilters7Spikes").attr("data-searchvendorid"), this.priceFrom = $(".nopAjaxFilters7Spikes").attr("data-searchpricefrom"), this.priceTo = $(".nopAjaxFilters7Spikes").attr("data-searchpriceto"), this.includeSubcategories = $(".nopAjaxFilters7Spikes").attr("data-searchincludesubcategories"), this.searchInProductDescriptions = $(".nopAjaxFilters7Spikes").attr("data-searchinproductdescriptions"), this.advancedSearch = $(".nopAjaxFilters7Spikes").attr("data-searchadvancedsearch"), this.categoryId = $(".nopAjaxFilters7Spikes").attr("data-categoryId"), this.manufacturerId = $(".nopAjaxFilters7Spikes").attr("data-manufacturerId"), this.vendorId = $(".nopAjaxFilters7Spikes").attr("data-vendorId"), this.getFilteredProductsUrl = $(".nopAjaxFilters7Spikes").attr("data-getFilteredProductsUrl"), this.filtersUIMode = $(".nopAjaxFilters7Spikes").attr("data-filtersUIMode"), this.filtersUIModeEnum = { userCheckboxes: "usecheckboxes", useDropDowns: "usedropdowns" }, this.selectedFilterGroupElement = void 0, this.selectedFilterOptionElement = void 0, this.isProductRefreshTriggeredByScroll = !1 }, function (e, t, r) { function i() { return "true" === e(".nopAjaxFilters7Spikes").attr("data-enableinfinitescroll").toLowerCase() } function a(t, r) { e(t).each(function () { var t = e(this); t.is("select") && t.val() !== r && (t.val(r).attr("valueChangedByScript", "true"), t.change()) }) } function o(t) { if (e(t).length > 0) return t; var r = t.slice(1); return t.startsWith("#") ? "." + r : t.startsWith(".") ? "#" + r : t } function s() { return o(e(".nopAjaxFilters7Spikes").attr("data-viewOptionsDropDownSelector") || ".products-viewmode, .viewmode-icon") } function l(t) { !0 === t.hasClass("closed") ? t.removeClass("closed") : t.addClass("closed"), t.parent().siblings(".filtersGroupPanel").slideToggle("slow", function () { e(this).css("overflow", "") }) } function n() { var t = e(".nopAjaxFilters7Spikes").first(), r = e(".block.filter-block.selected-options").first(), i = t.attr("data-selectedOptionsTargetSelector") || ".nopAjaxFilters7Spikes .filtersPanel:first", a = "usedropdowns" === t.attr("data-filtersuimode"); switch (t.attr("data-selectedOptionsTargetAction")) { case "insertBefore": r.insertBefore(i); break; case "insertAfter": r.insertAfter(i); break; case "appendTo": r.appendTo(i); break; default: r.prependTo(i) }var o = r.find(".selected-options-list"); o.empty(), r.find("a.toggleControl").off("click").on("click", function () { l(e(this)) }); var s = t.find(".priceRangeFilterPanel7Spikes"); if (s.length > 0) { var n = s.find("#slider"), d = n.attr("data-sliderminvalue"), c = n.attr("data-slidermaxvalue"), p = e(".priceRangeCurrentPricesPanel .currentMinPrice").text(), u = e(".priceRangeCurrentPricesPanel .currentMaxPrice").text(); if (n.length > 0 && (d !== p || c !== u)) { var f = e('<span class="option">' + p + " - " + u + "</span>"); f.anchorCustomClick(s.find(".clearPriceRangeFilter")); var h = s.find(".toggleControl").text(), g = e('<li class="price-range-selected-ranges"><label>' + h + ":</label></li>"); g.append(f), o.append(g) } } t.find(".filter-block").each(function () { var t = !1, r = e(this), i = e("<li><label>" + r.children(".title").children("a.toggleControl").first().text() + ":</label></li>"); r.find("[data-option-ids][selected], [data-option-ids][checked]").each(function () { var r = e(this), o = r.text() || r.next("label").text(), s = e('<span class="option">' + o + "</span>"); t = !0, a ? s.anchorCustomClick(r.closest(".filtersGroupPanel").siblings(".title").children(".clearFilterOptions")) : s.anchorCustomClick(r), i.append(s) }), t && o.append(i) }), o.children().length > 0 ? r.show() : (r.hide(), t.prepend(r)) } function d() { var t = s(), r = e(t).filter(".selected"); return r.length > 0 ? r.attr("data-dropdownoptionvalue") : e(".viewOptionsDropDown").attr("data-DropDownOptionsSelectedValue") || e(".viewOptionsDropDown").val() || null } function c(t) { var r = e(t.currentTarget).attr("data-pageNumber"); null != t.data && null != t.data.filtersManager && t.data.filtersManager.requestProductsForSelectedFilters(void 0, void 0, r, void 0, void 0, !0) } function p() { var t = e(".nopAjaxFilters7Spikes").attr("data-productsGridPanelSelector") + "," + e(".nopAjaxFilters7Spikes").attr("data-ProductsListPanelSelector"); return e(".master-wrapper-page " + t).not(".featured-product-grid, .nop-jcarousel").last() } function u() { var t = e(".pager .next-page > a").first(); if (0 !== t.length) { var i = p(); if (0 !== i.length) if (e(window).outerHeight() + e(window).scrollTop() > i.innerHeight() + i.offset().top) { e(".infinite-scroll-loader").show(); var a = new r, o = parseInt(t.attr("data-pageNumber")); a.requestProductsForSelectedFilters(void 0, void 0, o, void 0, void 0, !0, !0) } } else e(window).off("scroll.filtersinfinitescroll resize.filtersinfinitescroll orientationchange.filtersinfinitescroll") } function f() { if (0 === e(".infinite-scroll-loader").length) { var t = e(".ajaxBusyPanelParent"); 0 === t.length && (t = p()), t.append('<div class="infinite-scroll-loader">' + e(".nopAjaxFilters7Spikes").attr("data-infinitescrollloadertext") + "</div>") } } function h(t, o) { a(".sortOptionsDropDown", t), o && (i() && e.address.history(!0), (new r).requestProductsForSelectedFilters()) } function g(e, t) { a(".viewOptionsDropDown", e), t && (new r).requestProductsForSelectedFilters(void 0, void 0, void 0, void 0, void 0, !0) } function v(e, t) { a(".productsPageSizeDropDown", e), t && (new r).requestProductsForSelectedFilters() } function F(t, r) { t.each(function () { var t = "", i = e(r).val(), a = e.parseJSON(i); if (!e(this).is("select")) { var o = "."; return null != a[0] && a[0].Selected ? o += a[0].Value.toLowerCase() : null != a[1] && a[1].Selected && (o += a[1].Value.toLowerCase()), void e(s()).removeClass("selected").filter(o).addClass("selected") } for (var l = 0; l < a.length; l++) { var n = a[l], d = "<option "; n.Disabled && (d += 'disabled="disabled" '), n.Selected && (d += 'selected="selected" '), d += 'value="' + n.Value + '">', t += d += n.Text + "</option>" } e(this).html(t) }) } function S() { var t = e(o(e(".nopAjaxFilters7Spikes").attr("data-sortOptionsDropDownSelector") || ".products-orderby")); 0 !== t.length && (t.addClass("sortOptionsDropDown").removeAttr("onchange").off("change").on("change", function (t) { t.preventDefault(); var r = e(this), i = null == r.attr("valueChangedByScript"); r.removeAttr("valueChangedByScript"), h(r.val(), i) }), F(t, "#availableSortOptionsJson")) } function P() { var t = e(o(e(".nopAjaxFilters7Spikes").attr("data-productsPageSizeDropDownSelector") || ".products-pagesize")); 0 !== t.length && (t.addClass("productsPageSizeDropDown").removeAttr("onchange").off("change").on("change", function (t) { t.preventDefault(); var r = e(this), i = null == r.attr("valueChangedByScript"); r.removeAttr("valueChangedByScript"), v(r.val(), i) }), F(t, "#availablePageSizesJson")) } function x() { var t; S(), 0 !== (t = e(s())).length && (t.is("select") ? t.addClass("viewOptionsDropDown").removeAttr("onchange").off("change").on("change", function (t) { t.preventDefault(); var r = e(this), i = null == r.attr("valueChangedByScript"); r.removeAttr("valueChangedByScript"), g(r.val(), i) }) : (t.filter(".grid").attr("data-dropdownoptionvalue", "grid"), t.filter(".list").attr("data-dropdownoptionvalue", "list"), t.on("click", function (r) { r.preventDefault(), e(this).hasClass("selected") || (t.removeClass("selected"), e(this).addClass("selected"), g(e(this).attr("data-dropdownoptionvalue"), !0)) })), F(t, "#availableViewModesJson")), P(), e(document).trigger({ type: "ajaxFiltersReplacedDropDownsEvent" }) } var m = 0, y = 1, k = 2, w = 3, A = "nop7SpikesAjaxFiltersGrid"; e.fn.extend({ anchorCustomClick: function (t) { return e(this).first().on("click", function (r) { r.preventDefault(), e(t).trigger("click") }) } }), r.prototype.requestProductsForSelectedFilters = function (a, o, s, l, c, p, u) { if (!r.waitForAjaxRequest && "#/noFilterApplied" !== l) { a && o && i() && e.address.history(!0), this.isProductRefreshTriggeredByScroll = u || !1, null == l ? l = "" : p = !0, this.setSpecificationFilterSelection(a, o); var f = this.getSpecificationFiltersModel(), h = this.getAttributeFiltersModel(), g = this.getManufacturerFiltersModel(), v = this.getVendorFiltersModel(), F = this.getOnSaleFiltersModel(), S = this.getPriceRangeFilterModel(); null == s && (s = null); var P = e(".sortOptionsDropDown").val() || 0, x = d(), m = e(".productsPageSizeDropDown").val() || 0, y = t.getUrlVar("pageNumber"); null == y || null != s || null != c && !1 !== c || (s = y), null == p && (p = !1); var k = { categoryId: this.categoryId, manufacturerId: this.manufacturerId, vendorId: this.vendorId, priceRangeFilterModel7Spikes: S, specificationFiltersModel7Spikes: f, attributeFiltersModel7Spikes: h, manufacturerFiltersModel7Spikes: g, vendorFiltersModel7Spikes: v, pageNumber: s, orderby: P, viewmode: x, pagesize: m, queryString: l, shouldNotStartFromFirstPage: p, onSaleFilterModel: F, keyword: this.keyword, searchCategoryId: this.searchCategoryId, searchManufacturerId: this.searchManufacturerId, searchVendorId: this.searchVendorId, priceFrom: this.priceFrom, priceTo: this.priceTo, includeSubcategories: this.includeSubcategories, searchInProductDescriptions: this.searchInProductDescriptions, advancedSearch: this.advancedSearch, isOnSearchPage: this.isOnSearchPage }; this.isProductRefreshTriggeredByScroll || this.showProductPanelAjaxBusy(); var w = this, A = this.getFilteredProductsUrl; r.waitForAjaxRequest = !0, e.ajax({ cache: !1, type: "POST", data: e.toJSON(k), contentType: "application/json; charset=utf-8", url: A }).done(function (t) { if ("" !== l && (w.changeViewModeOrderByAndPageSize(t), w.setPriceRangeValues(t)), w.refreshProducts(t, w.isProductRefreshTriggeredByScroll)) { if (w.refreshFilters(t), w.refreshProductsPager(t), w.refreshClearButtons(), "NO HASH QUERY" !== l) { w.expandFilterPanelsWithSelectedOptions(); var i = e(t).filter("#urlHashQuery").val().toString(); "" !== i ? (w.isProductRefreshTriggeredByScroll && (i = i.slice(0, i.indexOf("&pageNumber"))), e.address.value(i)) : e.address.value("noFilterApplied") } w.hideProductPanelAjaxBusy(), r.waitForAjaxRequest = !1; var a = e(".nopAjaxFilters7Spikes").attr("data-scrollToElement"); if (!w.isProductRefreshTriggeredByScroll && null != a && "true" === a.toLowerCase()) { var o = e(".nopAjaxFilters7Spikes").attr("data-scrollToElementSelector").split(","), s = ".product-selectors"; if (null != o && o.length > 0) { for (var d = 0; d < o.length; d++)if (e(o[d].trim()).length > 0) { s = o[d].trim(); break } e(s).length > 0 && e("html, body").animate({ scrollTop: e(s).offset().top }, "slow") } } e(".productPanelAjaxBusy").length < 1 && w.addProductPanelAjaxBusyToPage(); var c = e(t).filter("#totalCount").val().toString(); if (e.event.trigger({ type: "nopAjaxFiltersFiltrationCompleteEvent", totalCount: c }), "true" === e(".nopAjaxFilters7Spikes").attr("data-showSelectedFiltersPanel").toLowerCase() && n(), "true" !== e(".nopAjaxFilters7Spikes").attr("data-enableinfinitescroll").toLowerCase() && "false" !== e(".nopAjaxFilters7Spikes").attr("data-numberofreturnedproductsselector").toLowerCase()) { var p = m; e(".page-body .product-grid:not(.featured-product-grid, .nop-jcarousel)").length > 0 ? p = e(".page-body .product-grid:not(.featured-product-grid, .nop-jcarousel) .item-box").length : e(".page-body .product-list").length > 0 && (p = e(".page-body .product-list .item-box").length), function (t, r) { if (null != t || (t = parseInt(e(".productsPageSizeDropDown .toplevel p").text()), !isNaN(t))) { t > (r = parseInt(r)) && (t = r); var i = e(".nopAjaxFilters7Spikes").attr("data-numberofreturnedproductsselector") || ".product-viewmode", a = e(i); e(".returned-products-filters-panel").children(".allProductsReturned").text(r); var o = e(".number-of-returned-products.sample-element").first(); e(".number-of-returned-products").not(o).remove(); var s = o.clone(); s.removeClass("sample-element"), s.children(".productsPerPage").text(t), s.children(".allProductsReturned").text(r), 0 === a.length ? e(".product-selectors").append(s) : a.after(s), s.css("display", "").addClass("active") } }(p, c) } $("html,body").animate({ scrollTop: 0 }, 10) } else r.waitForAjaxRequest = !1 }).fail(function () { w.hideProductPanelAjaxBusy(), alert("Loading the page failed."), r.waitForAjaxRequest = !1 }).always(function () { w.isProductRefreshTriggeredByScroll = !1, i() && e.address.history(!1) }) } }, r.prototype.getSpecificationFiltersModel = function () { return this.buildSpecificationFiltersModel(this.categoryId, this.manufacturerId, this.vendorId, this.selectedFilterGroupElement) }, r.prototype.getAttributeFiltersModel = function () { return this.buildAttributeFiltersModel(this.categoryId, this.manufacturerId, this.vendorId, this.selectedFilterGroupElement) }, r.prototype.getManufacturerFiltersModel = function () { return this.buildManufacturerFiltersModel(this.categoryId, this.selectedFilterGroupElement) }, r.prototype.getVendorFiltersModel = function () { return this.buildVendorFiltersModel(this.categoryId, this.selectedFilterGroupElement) }, r.prototype.getOnSaleFiltersModel = function () { return this.buildOnSaleFiltersModel(this.categoryId, this.manufacturerId, this.vendorId, this.selectedFilterGroupElement) }, r.prototype.getPriceRangeFilterModel = function () { var e = null; return null != this.buildPriceRangeFilterModel && (e = this.buildPriceRangeFilterModel(this.categoryId, this.manufacturerId, this.vendorId, this.selectedFilterGroupElement)), e }, r.prototype.refreshProducts = function (t, r) { var i, a = d() || e(".nopAjaxFilters7Spikes").attr("data-defaultViewMode"), o = this.getProductsPanelSelector(a), s = e("." + A); if (null != e(t).filter(o).html()) { if (s.length > 1 && (s = s.last()), r) { var l = e(t).filter(o), n = l.find(".item-box"); l.hasClass("product-grid") ? s.hasClass("product-list") && s.removeClass("product-list").addClass("product-grid") : s.hasClass("product-grid") && s.removeClass("product-grid").addClass("product-list"), e(".infinite-scroll-loader").hide(), s.find(".item-box").last().after(n) } else 0 == s.length && (s = $(".product-grid")), s.replaceWith(e(t).filter(o)); i = !0 } else this.hideProductPanelAjaxBusy(), e("#nopAjaxFiltersNoProductsDialog").length > 0 ? this.showNoProductsModalDialog() : (s.prepend(e(t).filter("#nopAjaxFiltersNoProductsDialog")), this.showNoProductsModalDialog()), i = !1; return i }, r.prototype.refreshProductsPager = function (t) { var r = this.getPagerPanelSelector(), i = e(r); if (void 0 !== t) { var a = e(t).filter(r); if (0 === i.length && a.length > 0) { var o = e(".nopAjaxFilters7Spikes").attr("data-pagerpanelintegrationselector") || ".product-grid, .product-list", s = e(o); s.length > 0 && (s.hasClass("product-grid") || s.hasClass("product-list")) && (s = s.not(".featured-product-grid, .nop-jcarousel").last()), 0 === s.length && (s = p()), s.after('<div class="pager"></div>'), i = e(r) } "true" === e(".nopAjaxFilters7Spikes").attr("data-enableinfinitescroll").toLowerCase() && i.hide(), i.html(a.html()), i.length > 0 && 0 === a.length && i.remove() } this.setPagerLinks(i) }, r.prototype.setPagerLinks = function (t) { var r = this; t.find("a").each(function () { var t = e(this).attr("href"), i = ""; if (null != t) { t = t.toLowerCase(); var a = /pagenumber=(\d+)/.exec(t); null != a && a.length > 1 && (i = a[1]) } e(this).removeAttr("href"), e(this).attr("data-pageNumber", i), e(this).click({ filtersManager: r }, c) }) }, r.prototype.getProductsPanelSelector = function (t) { return "list" === t ? e(".nopAjaxFilters7Spikes").attr("data-ProductsListPanelSelector") || ".product-list" : e(".nopAjaxFilters7Spikes").attr("data-productsGridPanelSelector") || ".product-grid" }, r.prototype.getPagerPanelSelector = function () { return e(".nopAjaxFilters7Spikes").attr("data-pagerPanelSelector") || ".pager" }, r.prototype.clearFilterOptions = function (t) { var r = e(t.currentTarget).parent().siblings(".filtersGroupPanel"); t.data.filtersManager.clearFilterOptionsForFiltersGroupElement(r) }, r.prototype.clearFilterOptionsForFiltersGroupElement = function (e) { e.find("[data-option-ids]").removeAttr("checked selected"); var t = e.find(".select-wrap"); t.length > 0 && t.find(".select-inner").text(t.find("select option:selected").text()), this.requestProductsForSelectedFilters(e, void 0) }, r.prototype.selectAllFilterDropDownOption = function (t) { var r = e(t.currentTarget).closest(".filtersGroupPanel"); this.clearFilterOptionsForFiltersGroupElement(r) }, r.prototype.clearAllFilterOptions = function (t) { e(".nopAjaxFilters7Spikes .filtersGroupPanel").find("[data-option-ids]").removeAttr("checked selected"), e(".nopAjaxFilters7Spikes .select-wrap").each(function () { var t = e(this); t.find(".select-inner").text(t.find("select option:selected").text()) }); var r = t.data.filtersManager; r.clearPriceRangeFilterControl(), r.requestProductsForSelectedFilters() }, r.prototype.refreshClearButtons = function () { var t = !1; e(".nopAjaxFilters7Spikes .filtersGroupPanel").each(function () { var r = e(this), i = !1; r.find("[data-option-ids]").each(function () { var t = e(this); if (null != (t.attr("selected") || t.attr("checked"))) return i = !0, !1 }); var a = r.parent().find("a.clearFilterOptions"); i ? (a.show(), t = !0) : a.hide() }); var r = e(".nopAjaxFilters7Spikes .filtersTitlePanel a.clearFilterOptionsAll"); if (t) r.show(); else { var i = !1; null != this.determineIfPriceRangeHasBeenSelected && (i = this.determineIfPriceRangeHasBeenSelected()), i ? r.show() : r.hide() } }, r.prototype.expandFilterPanelsWithSelectedOptions = function () { e(".clearPriceRangeFilter, .clearFilterOptions").filter(":visible").siblings("a.toggleControl.closed").click() }, r.prototype.changeViewModeOrderByAndPageSize = function (t) { var r = e(t).filter("#currentPageSizeJson").val(), i = e.parseJSON(r), o = e(t).filter("#currentOrderByJson").val(), l = e.parseJSON(o), n = e(t).filter("#currentViewModeJson").val(), d = e.parseJSON(n); a(".sortOptionsDropDown", l), a(".viewOptionsDropDown", d), a(".productsPageSizeDropDown", i), e(s()).removeClass("selected").filter("." + d).addClass("selected") }, r.prototype.setPriceRangeValues = function (t) { var r = e(t).filter("#priceRangeFromJson").val().toString(), i = e.parseJSON(r), a = e(t).filter("#priceRangeToJson").val().toString(), o = e.parseJSON(a); null != this.SetSliderValues && this.SetSliderValues(i, o) }, r.prototype.refreshFilters = function (t) { var r = this, i = e(t).filter("#specificationFilterModel7SpikesJson").val().toString(), a = e.parseJSON(i); r.refreshSpecificationFilters(a, r.filtersUIMode); var o = e(t).filter("#attributeFilterModel7SpikesJson").val().toString(), s = e.parseJSON(o); r.refreshAttributeFilters(s, r.filtersUIMode); var l = e(t).filter("#manufacturerFilterModel7SpikesJson").val().toString(), n = e.parseJSON(l); r.refreshManufacturerFilters(n, r.filtersUIMode); var d = e(t).filter("#vendorFilterModel7SpikesJson").val().toString(), c = e.parseJSON(d); r.refreshVendorFilters(c, r.filtersUIMode); var p = e(t).filter("#onSaleFilterModel7SpikesJson").val().toString(), u = e.parseJSON(p); r.refreshOnSaleFilters(u, r.filtersUIMode), e(".nopAjaxFilters7Spikes .filtersGroupPanel").each(function () { var t = e(this), r = !0; t.find("[data-option-ids]").each(function () { if (!e(this).is(":disabled")) return r = !1, !1 }), r ? t.find("select").attr("disabled", "disabled") : t.find("select").removeAttr("disabled"), t.toggleClass("disabled", r) }) }, r.prototype.clearPriceRangeFilterControl = function () { }, r.prototype.refreshManufacturerFilters = function () { }, r.prototype.refreshVendorFilters = function () { }, r.prototype.refreshSpecificationFilters = function () { }, r.prototype.refreshAttributeFilters = function () { }, r.prototype.refreshOnSaleFilters = function () { }, r.prototype.buildManufacturerFiltersModel = function () { }, r.prototype.buildVendorFiltersModel = function () { }, r.prototype.buildSpecificationFiltersModel = function () { }, r.prototype.buildAttributeFiltersModel = function () { }, r.prototype.buildOnSaleFiltersModel = function () { }, r.prototype.addProductPanelAjaxBusyToPage = function () { var t = p(); t.addClass("ajaxBusyPanelParent " + A), t.css("position", "relative"), t.append(e('<div class="productPanelAjaxBusy"></div><div class="clear"></div>')), e(".productPanelAjaxBusy").hide(), f() }, r.prototype.setSpecificationFilterSelection = function (e, t) { this.selectedFilterGroupElement = e, this.selectedFilterOptionElement = t }, r.prototype.showNoProductsModalDialog = function () { var t = e("#nopAjaxFiltersNoProductsDialog").data("kendoWindow"), r = e("#nopAjaxFiltersNoProductsDialog").attr("title"); r || (r = "NO RESULTS FOUND"), t || (t = e("#nopAjaxFiltersNoProductsDialog").kendoWindow({ draggable: !1, resizable: !1, width: "300px", height: "100px", title: r, modal: !0, actions: ["Close"], animation: !1, visible: !1 }).data("kendoWindow")).wrapper.addClass("ajaxFilters"), t.center(), t.open(), e(document).on("click", ".k-overlay", function () { t.close() }) }, r.prototype.showProductPanelAjaxBusy = function () { e(".productPanelAjaxBusy").show() }, r.prototype.hideProductPanelAjaxBusy = function () { e(".productPanelAjaxBusy").hide() }, r.getFilterItemStateBasedOnAttributes = function (e) { var t = null != (e.attr("selected") || e.attr("checked")), r = null != e.attr("disabled"); return t && r ? "CheckedDisabled" : t && !r ? "Checked" : !t && r ? "Disabled" : "Unchecked" }, r.waitForAjaxRequest = !1, r.addStateClassToCheckBoxParent = function (e, t) { var r = e.parent("li"); 0 !== r.length && (t !== y && t !== k || (r.addClass("checked"), t === y && r.removeClass("disabled")), t !== k && t !== w || r.addClass("disabled"), t === m && r.removeClass("checked disabled")) }, r.addStateAttributesToOption = function (e, t, r) { t !== y && t !== k || (r ? e.attr("selected", "selected").trigger("change") : e.attr("checked", "checked"), t === y && e.removeAttr("disabled")), t !== k && t !== w || e.attr("disabled", "disabled"), t === m && e.removeAttr("checked selected disabled") }, r.addStateClassAndAttributesToOption = function (e, t, i) { var a = !1; return t === y && (a = !0), i || r.addStateClassToCheckBoxParent(e, t), r.addStateAttributesToOption(e, t, i), a }, e(document).ready(function () { var t = new r; t.addProductPanelAjaxBusyToPage(), e(".nopAjaxFilters7Spikes .block .title a.toggleControl").off("click").on("click", function () { l(e(this)) }), e(".nopAjaxFilters7Spikes .block .title a.clearFilterOptions").each(function () { e(this).click({ filtersManager: t }, t.clearFilterOptions), e(this).hide() }), e(".nopAjaxFilters7Spikes .filtersDropDown a.allFilterDropDownOptions").each(function () { e(this).click({ filtersManager: t }, t.selectAllFilterDropDownOption) }); var i = e(".nopAjaxFilters7Spikes .filtersTitlePanel a.clearFilterOptionsAll"); if (i.click({ filtersManager: t }, t.clearAllFilterOptions), i.hide(), t.refreshProductsPager(), t.filtersUIMode === t.filtersUIModeEnum.useDropDowns) { var a = e(".filtersDropDownPanel.filtersGroupPanel"), o = a.length + 100; a.each(function () { e(this).css("z-index", o--) }) } "true" === e(".nopAjaxFilters7Spikes").attr("data-enableinfinitescroll").toLowerCase() && function () { f(), e(".product-page-size, " + e(".nopAjaxFilters7Spikes").attr("data-pagerpanelselector")).hide(), e(".product-selectors").addClass("infinite-scroll-enabled"); var t = function () { e(window).off("scroll.filtersinfinitescroll resize.filtersinfinitescroll orientationchange.filtersinfinitescroll").on("scroll.filtersinfinitescroll resize.filtersinfinitescroll orientationchange.filtersinfinitescroll", function () { u() }), u() }; e(document).on("nopAjaxFiltersFiltrationCompleteEvent", t), window.location.hash && "#/noFilterApplied" !== window.location.hash || t() }(), e(".filtersGroupSearchInput").on("keyup", function () { var t = e(this).val().toLowerCase(), r = e(this).parent().next(".checkbox-list").children(); "" === t ? r.each(function () { var t = e(this), r = t.find("label"), i = r.data("originaltext"); r.html(i), t.show() }) : r.each(function () { var r = e(this), i = r.find("label"), a = i.data("originaltext"), o = a.toLowerCase().indexOf(t); if (-1 !== o) { var s = a.substring(o, o + t.length); if (0 === o) { var l = a.substring(s.length); i.html("<strong>" + s + "</strong>" + l) } else if (o > 0) { var n = a.slice(0, o), d = a.slice(o + t.length); i.html(n + "<strong>" + s + "</strong>" + d) } r.show() } else r.hide() }) }), null == e("body").attr("nosimpleselect") && e(".filtersPanel select").simpleSelect() }), e(window).unload(function () { i() && e.address.history(!0) }), e(document).ready(function () { x(), i() && e.address.history(!1) }) }(jQuery, sevenSpikes, FiltersManager);