@using Nop.Core
@using Nop.Core.Infrastructure
@using Nop.Services.Configuration
@using Nop.Services.Localization
@using Nop.Web.Framework.Themes
@using System.Web.Mvc
@{

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="HandheldFriendly" content="true">
    <meta name="description" content="">
    <meta id="v65-layout-mode" data-cart="storedot" data-checkout="storedot" data-use-simplified-checkout="true">
    <meta id="v65-logo-dimensions" data-height="80" data-width="281">

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,600italic,400italic,700,700italic|Open+Sans+Condensed:700' rel='stylesheet' type='text/css'>
    <link href="https://plus.google.com/115835647152633313696" rel="publisher" />
    <!--  END OF GOOGLE PUBLISHER AUTHOR TAGS -->
    <meta name="p:domain_verify" content="a9ad3a7e7a99f55dc88c7d65dc309766" />
    <meta name="google-site-verification" content="x35b6_uV90QUEZ9eO9ImfoK9NLTlwjvxCMynf9fSQiI" />

    var controllerName = HttpContext.Current.Request.RequestContext.RouteData.GetRequiredString("controller");
    var actionName = HttpContext.Current.Request.RequestContext.RouteData.GetRequiredString("action");
    var isHomePage = controllerName.Equals("home", StringComparison.InvariantCultureIgnoreCase) &&
                        actionName.Equals("index", StringComparison.InvariantCultureIgnoreCase);

    var currentStore = EngineContext.Current.Resolve<IStoreContext>().CurrentStore;
    int storeId = currentStore.Id;
    var settingsService = EngineContext.Current.Resolve<ISettingService>();
    bool isHomeSliderFullWidth = settingsService.GetSettingByKey("pavilionthemesettings.ishomepagemainsliderfullwidth", false, storeId, true);
    bool stickyCategoryMenuFlyout = settingsService.GetSettingByKey("pavilionthemesettings.StickyCategoryMenuFlyout", true, storeId, true);
    bool showCategoriesInSideMenu = settingsService.GetSettingByKey("pavilionthemesettings.ShowCategoriesInSideMenu", true, storeId, true);
    string numberofSubcategories = settingsService.GetSettingByKey<string>("megamenusettings.ShowNumberofSubcategories");
    TempData["numberofSubcategories"] = numberofSubcategories;
    var homePageMainSlider = new MvcHtmlString("");

    if (isHomePage)
    {
        homePageMainSlider = Html.Widget("home_page_main_slider");
    }

    Html.AppendCssFileParts("~/Themes/Pavilion/Content/css/owl.carousel.css");
    Html.AddScriptParts("~/Themes/Pavilion/Content/scripts/owl.carousel.min.js");
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>

        #goToTop {
            bottom: 80px !important;
        }
       
        .header-upper {
            height: auto;
            background-color: #fff !important;
        }

        .admin-header-links {
            background-color: #fff;
            color: #0072bc;
        }

            .admin-header-links a {
                color: #0072bc !important;
            }

        @@media (max-width: 1000px) {
            .header-right-sidebar span.administration {
                color: #0072bc;
                background: #fff;
                width: 100% !important;
                padding: 2px 0;
                text-align: center;
                font-size: 16px;
            }

            .header-right-sidebar {
                z-index: 9999;
                color: #0072bc;
                /*background: #0072bc;*/
            }

            .admin-header-links {
                background-color: #fff;
                color: #0072bc;
                text-align: right;
                font-weight: bold;
            }
        }
    </style>
}
<div class="header">
    @Html.Widget("header")
    <div class="header-upper">
        <div class="center">
            @Html.Action("AdminHeaderLinks", "Common")
            @{
                var taxTypeSelectorHtml = @Html.Action("TaxTypeSelector", "Common");
                var currencySelectorHtml = @Html.Action("CurrencySelector", "Common");
                var languageSelectorHtml = @Html.Action("LanguageSelector", "Common");

                MvcHtmlString headerSelectorWidgetHtml = @Html.Widget("header_selectors");
                // it is better to trim the string and then check for null or empty because the MvcHtmlString.IsNullOrEmpty fail if the variable contains empty spaces
                var headerSelectorWidgetHtmlString = headerSelectorWidgetHtml.ToHtmlString().Trim();
            }
            @if (!MvcHtmlString.IsNullOrEmpty(taxTypeSelectorHtml) ||
                 !MvcHtmlString.IsNullOrEmpty(currencySelectorHtml) ||
                 !MvcHtmlString.IsNullOrEmpty(languageSelectorHtml) ||
                 !String.IsNullOrEmpty(headerSelectorWidgetHtmlString))
            {
                <div class="header-selectors-wrapper">
                    <label>@T("SevenSpikes.Themes.Pavilion.Header.Preferences")</label>
                    <div class="header-selectors">
                        @taxTypeSelectorHtml
                        @currencySelectorHtml
                        @languageSelectorHtml
                        @headerSelectorWidgetHtml
                    </div>
                </div>
                <div class="header-selector-widget" style="display: none;">@headerSelectorWidgetHtml</div>

            }
            <!-- <div class="contacy-number">
                 <span class="hidden-xs hidden-sm">Toll-Free: 866-856-7063</span>
             </div>-->
            @*<div class="header-links-wrapper">

                    <label>@T("SevenSpikes.Themes.Pavilion.Header.MyAccount")</label>
                    @Html.Action("HeaderLinks", "Common")
                </div>*@
            <!-- <div class="cms-links">
                 <ul>
                     <li><a href="@Url.RouteUrl("HomePage")">Home</a></li>
                     <li><a href="@Url.RouteUrl("topic", new { sename = "about-us" })">About us</a></li>
                     <li><a href="@Url.RouteUrl("ContactUs")">Contact us</a></li>

                 </ul>
             </div>-->
        </div>
    </div>

    <div class="header-middle">

        <div class="center">
            <div class="header-logo">
                @Html.Action("Logo", "Common")
            </div>
            <div class="search-box store-search-box header-search @if (!showCategoriesInSideMenu){<text>full-width</text>}">
                @Html.Action("SearchBox", "Catalog")
            </div>
            @*<div class="header-menu-parent">
                    <div class="header-menu @if (showCategoriesInSideMenu){<text>categories-in-side-panel</text>}">
                        <div class="close-menu">
                            <span>@T("SevenSpikes.Themes.Common.CloseMenu")</span>
                        </div>
                        @{
                            var menuHtml = Html.Widget("theme_header_menu");
                        }
                        @if (!MvcHtmlString.IsNullOrEmpty(menuHtml))
                        {
                            @menuHtml
                        }
                        else
                        {
                            @Html.Action("TopMenu", "Catalog")
                        }
                    </div>
                </div>*@
            <div class="header-right-sidebar">
                <span class="administration">@T("Account.CompanyNo")</span>
                <div class="header-links-wrapper">
                    <label>&nbsp;<i class="fa"><img alt="" src="~/Themes/Pavilion/Content/images/arrow_dow.png"></i></label>
                    @Html.Action("HeaderLinks", "Common")
                </div>
                @Html.Action("FlyoutShoppingCart", "ShoppingCart")
                <div class="fish-box"></div>
            </div>

        </div>
    </div>
    <div class="header-lower">
        <div class="center">
            @if (showCategoriesInSideMenu)
            {
                <span class="category-navigation-title">@T("SevenSpikes.Themes.Pavilion.Header.AllCategories")</span>

                if (!isHomePage || isHomeSliderFullWidth)
                {
                    <div class="category-navigation-list-wrapper">
                        <ul class="category-navigation-list @if (stickyCategoryMenuFlyout){<text>sticky-flyout</text>}"></ul>
                    </div>
                }
            }
            <div class="header-menu-parent">
                <div class="header-menu @if (showCategoriesInSideMenu){<text>categories-in-side-panel</text>}">
                    <div class="close-menu">
                        <span>@T("SevenSpikes.Themes.Common.CloseMenu")</span>
                    </div>
                    @{
                        var menuHtml = Html.Widget("theme_header_menu");
                    }
                    @if (!MvcHtmlString.IsNullOrEmpty(menuHtml))
                    {
                        @menuHtml
                    }
                    else
                    {
                        @Html.Action("TopMenu", "Catalog")
                    }
                </div>
            </div>
            @*<div class="search-box store-search-box @if (!showCategoriesInSideMenu){<text>full-width</text>}">
                    @Html.Action("SearchBox", "Catalog")
                </div>*@
            @*<div class="two-colums-area-right">
                    @Html.Action("TopicBlock", "Topic", new { systemName = "HomepagetextSlider" })
                </div>*@
        </div>
        @if (this.ViewContext.RouteData.Values["controller"].ToString().ToLower() == "home") { }
        else
        {<div class="homepage-text-global">
                @Html.Action("TopicBlock", "Topic", new { systemName = "HomepagetextSlider" })
            </div>}

    </div>
</div>
<script>
    //$(document).ready(function () {
    //    $('.category-navigation-list').perfectScrollbar({
    //        swipePropagation: false,
    //        wheelSpeed: 1,
    //        suppressScrollX: true
    //    });
    //});

</script>
@if (isHomePage)
{
    var homePageSliderCss = isHomeSliderFullWidth ? "slider-fullwidth" : "slider-right-column";

    <div class="two-columns-area @homePageSliderCss">
        @*@Html.Widget("home_page_top")*@
        @if (isHomeSliderFullWidth)
        {

            @homePageMainSlider
        }

        <div class="center">
            <div class="two-colums-area-left">
                @if (showCategoriesInSideMenu && !isHomeSliderFullWidth)
                {
                    <div class="category-navigation-list-wrapper">
                        <ul class="category-navigation-list @if (stickyCategoryMenuFlyout){<text>sticky-flyout</text>}"></ul>
                    </div>
                }

                @*@Html.Action("HomepageProducts", "Product")*@
            </div>
            <div class="two-colums-area-right">
                @*@if (this.ViewContext.RouteData.Values["controller"].ToString().ToLower() == "home")
                     {
                         <div class="homepage-text-home">

                             @Html.Action("TopicBlock", "Topic", new { systemName = "HomepagetextSlider" }
                    ) </div>}*@

                @Html.Widget("home_page_top")
                @if (!isHomeSliderFullWidth)
                {
                    @homePageMainSlider

                }
                @Html.Widget("homepage_slider_after")
            </div>
        </div>
    </div>
}
<script>
    $('.hometextslider').owlCarousel({
        items: 1,
        autoplay: true,
        autoPlaySpeed: 5000,
        autoPlayTimeout: 5000,
        autoplayHoverPause: true,
        loop: true
    })

</script>
<!-- START OF GOOGLE ANALYTICS -->
<script type="text/javascript">
    var _gaq = _gaq || [];

    var pluginUrl =
        '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
    _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
    _gaq.push(['_setAccount', 'UA-7294404-1']);
    _gaq.push(['_setDomainName', 'mypromotionalpens.com']);
    _gaq.push(['_trackPageview']);

    (function () {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'https://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
    })();
</script>
<!-- END OF GOOGLE ANALYTICS -->
<!-- begin olark code -->
@*<script data-cfasync="false" type='text/javascript'>
    /*<![CDATA[*/window.olark || (function (c) {
                var f = window, d = document, l = f.location.protocol == "https:" ? "https:" : "http:", z = c.name, r = "load";
                var nt = function () {
                    f[z] = function () {
                        (a.s = a.s || []).push(arguments)
                    };
                    var a = f[z]._ = {
                    }, q = c.methods.length;
                    while (q--) {
                        (function (n) {
                            f[z][n] = function () {
                                f[z]("call", n, arguments)
                            }
                        })(c.methods[q])
                    }
                    a.l = c.loader;
                    a.i = nt;
                    a.p = {
                        0: +new Date};
                    a.P = function (u) {
                        a.p[u] = new Date - a.p[0]
                    };
                    function s() {
                        a.P(r);
                        f[z](r)
                    }
                    f.addEventListener ? f.addEventListener(r, s, false) : f.attachEvent("on" + r, s);
                    var ld = function () {
                        function p(hd) {
                            hd = "head";
                            return["<", hd, "></", hd, "><", i, ' onl' + 'oad="var d=', g, ";d.getElementsByTagName('head')[0].", j, "(d.", h, "('script')).", k, "='", l, "//", a.l, "'", '"', "></", i, ">"].join("")
                        }
                        var i = "body", m = d[i];
                        if (!m) {
                            return setTimeout(ld, 100)
                        }
                        a.P(1);
                        var j = "appendChild", h = "createElement", k = "src", n = d[h]("div"), v = n[j](d[h](z)), b = d[h]("iframe"), g = "document", e = "domain", o;
                        n.style.display = "none";
                        m.insertBefore(n, m.firstChild).id = z;
                        b.frameBorder = "0";
                        b.id = z + "-loader";
                        if (/MSIE[ ]+6/.test(navigator.userAgent)) {
                            b.src = "javascript:false"
                        }
                        b.allowTransparency = "true";
                        v[j](b);
                        try {
                            b.contentWindow[g].open()
                        } catch (w) {
                            c[e] = d[e];
                            o = "javascript:var d=" + g + ".open();d.domain='" + d.domain + "';";
                            b[k] = o + "void(0);"
                        }
                        try {
                            var t = b.contentWindow[g];
                            t.write(p());
                            t.close()
                        } catch (x) {
                            b[k] = o + 'd.write("' + p().replace(/"/g, String.fromCharCode(92) + '"') + '");d.close();'
                        }
                        a.P(2)
                    };
                    ld()
                };
                nt()
            })({
                loader: "static.olark.com/jsclient/loader0.js", name: "olark", methods: ["configure", "extend", "declare", "identify"]});
            /* custom configuration goes here (www.olark.com/documentation) */
    olark.identify('3762-673-10-6780');/*]]>*/</script>
    <noscript><a href="https://www.olark.com/site/3762-673-10-6780/contact" title="Contact us" target="_blank">Questions? Feedback?</a> powered by <a href="https://www.olark.com?welcome" title="Olark live chat software"></a></noscript>*@
@*9744-773-10-9610*@
@* 3762-673-10-6780 *@
<!-- end olark code -->
<!--- begin zoho chat -->
<script type="text/javascript">
    var isProduction = '@T("Site.IsProduction").Text';
    if(isProduction.toLowerCase() == 'false') {
        var $zoho = $zoho || {}; $zoho.salesiq = $zoho.salesiq ||
        { widgetcode: "ab03e0b22a7c8d446cab09f2c92c771199a65269fd995ca90161d59bc6fe3289", values: {}, ready: function () { } };
        var d = document; s = d.createElement("script"); s.type = "text/javascript"; s.id = "zsiqscript"; s.defer = true;
        s.src = "https://salesiq.zoho.com/widget"; t = d.getElementsByTagName("script")[0]; t.parentNode.insertBefore(s, t); d.write("<div id='zsiqwidget'></div>");
    }
    else {
        var $zoho = $zoho || {}; $zoho.salesiq = $zoho.salesiq || { widgetcode: "a5c2f5b9b63cdca12552d5bbe5a8eaadcf5202c393ba20270a11102f053acc895d5fe629768af6d9a03793700d9418c2", values: {}, ready: function () { } }; var d = document; s = d.createElement("script"); s.type = "text/javascript"; s.id = "zsiqscript"; s.defer = true; s.src = "https://salesiq.zoho.com/widget"; t = d.getElementsByTagName("script")[0]; t.parentNode.insertBefore(s, t); d.write("<div id='zsiqwidget'></div>");
}
</script>
<style>

    .zls-sptwndw.siqembed.siqtrans.siq_rht.zsiq_size2.siqanim {
        left: auto !important;
    }

    #titlediv {
        display: none !important;
    }
</style>
<!--- end zoho chat -->
<script type="text/javascript">
    adroll_adv_id = "A2R2MU4GT5EA3PYLMXE5LR";
    adroll_pix_id = "FTXJPLB2MNHNBLM2EV3FGA";
    // adroll_email = "username@example.com"; // OPTIONAL: provide email to improve user identification
    (function () {
        var _onload = function () {
            if (document.readyState && !/loaded|complete/.test(document.readyState)) { setTimeout(_onload, 10); return }
            if (!window.__adroll_loaded) { __adroll_loaded = true; setTimeout(_onload, 50); return }
            var scr = document.createElement("script");
            var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "https://a.adroll.com");
            scr.setAttribute('async', 'true');
            scr.type = "text/javascript";
            scr.src = host + "/j/roundtrip.js";
            ((document.getElementsByTagName('head') || [null])[0] ||
                document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
        };

        if (window.addEventListener) { window.addEventListener('load', _onload, false); }
        else { window.attachEvent('onload', _onload) }
    }());
</script>
<!-- Google Code for Remarketing Tag -->
<!--------------------------------------------------
Remarketing tags may not be associated with personally identifiable information or placed on pages related to sensitive categories. See more information and instructions on how to setup the tag on: https://google.com/ads/remarketingsetup
--------------------------------------------------->
<script type="text/javascript">
    var google_tag_params = {
        ecomm_prodid: 'REPLACE_WITH_VALUE',
        ecomm_pagetype: 'REPLACE_WITH_VALUE',
        ecomm_totalvalue: 'REPLACE_WITH_VALUE',
    };
</script>
<script type="text/javascript">
    /* <![CDATA[ */
    var google_conversion_id = 1025360246;
    var google_custom_params = window.google_tag_params;
    var google_remarketing_only = true;
    /* ]]> */
</script>
<script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js" defer>
</script>
<noscript>
    <div style="display:inline;">
        <p>Please enable javascript</p>
        <!--  <img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1025360246/?value=0&amp;guid=ON&amp;script=0" />-->
    </div>
</noscript>
